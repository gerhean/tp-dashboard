(function(e){function t(t){for(var o,n,a=t[0],l=t[1],c=t[2],p=0,u=[];p<a.length;p++)n=a[p],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&u.push(s[n][0]),s[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(u.length)u.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],o=!0,a=1;a<i.length;a++){var l=i[a];0!==s[l]&&(o=!1)}o&&(r.splice(t--,1),e=n(n.s=i[0]))}return e}var o={},s={app:0},r=[];function n(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=o,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"085c":function(e,t,i){},"0a70":function(e,t,i){},1:function(e,t){},"16de":function(e,t,i){"use strict";i("1dd7")},"1dd7":function(e,t,i){},2133:function(e,t,i){"use strict";i("2d5e")},2225:function(e,t,i){"use strict";i("0a70")},"2d5e":function(e,t,i){},"4b19":function(e,t,i){"use strict";i("085c")},"56d7":function(e,t,i){"use strict";i.r(t);var o=i("7a23"),s=i("ecee"),r=i("ad3d"),n=i("1487"),a=i.n(n);const l={id:"app"},c=Object(o["i"])("i",{class:"overlay-loading-icon fas fa-spin fa-spinner"},null,-1),d={id:"summary-wrapper"},p={class:"timestamp-footer"},u=Object(o["i"])("span",null,"Generated by ",-1),h=Object(o["i"])("strong",null,"this version",-1),b=Object(o["i"])("span",null," of ",-1),m=Object(o["i"])("strong",null,"RepoSense",-1),f=Object(o["i"])("span",null," (",-1),O=Object(o["i"])("strong",null,"User Guide",-1),g={class:"report-generation-time",style:{display:"none"}},j={id:"tabs-wrapper",ref:"tabWrapper"},y={class:"tab-content panel-padding"},w={class:"tab-pane"},v={key:2,id:"tab-empty"},T={class:"title"},C=Object(o["i"])("h2",null,"Welcome to this RepoSense report!",-1),k=Object(o["i"])("p",null,"The charts on the left show the contribution activities, grouped by repository and author.",-1),S=Object(o["h"])("To view the code attributed to a specific author, click the  "),F=Object(o["h"])("  icon next to that author's name."),z=Object(o["i"])("br",null,null,-1),D=Object(o["h"])("To view the breakdown of commits made by a specific author, click the  "),M=Object(o["h"])("  icon next to that author's name."),R=Object(o["i"])("br",null,null,-1),G=Object(o["h"])("To hide the code view and show only the activity charts, click the  "),A=Object(o["h"])("  icon on the centre divider."),B=Object(o["h"])("See the  "),_=Object(o["i"])("strong",null,"User Guide",-1),H=Object(o["h"])("  to get a better understanding of how to interpret the report."),L=Object(o["i"])("div",{class:"empty"},"Please upload a .zip file generated by RepoSense.",-1),U={id:"file-upload",onsubmit:"return false;"};function x(e,t,i,s,r,n){const a=Object(o["w"])("loading-overlay"),x=Object(o["w"])("v-summary"),E=Object(o["w"])("v-authorship"),I=Object(o["w"])("v-zoom"),N=Object(o["w"])("font-awesome-icon"),$=Object(o["w"])("v-resizer");return Object(o["o"])(),Object(o["e"])("div",l,[Object(o["i"])(a,{class:"overlay-loader",active:r.isLoadingOverlayEnabled,opacity:r.loadingOverlayOpacity,"is-full-page":!0},{default:Object(o["G"])(()=>[c]),after:Object(o["G"])(()=>[Object(o["i"])("h3",null,Object(o["z"])(e.loadingOverlayMessage),1)]),_:1},8,["active","opacity"]),r.userUpdated?(Object(o["o"])(),Object(o["e"])($,{key:0,"is-tab-active":r.isTabActive,onCloseTab:n.deactivateTab},{left:Object(o["G"])(()=>[Object(o["i"])("div",d,[Object(o["i"])(x,{class:"tab-padding",ref:"summary",repos:r.users,"error-messages":r.errorMessages,onGetDates:n.receiveDates},null,8,["repos","error-messages","onGetDates"]),Object(o["i"])("div",p,[u,Object(o["i"])("a",{href:n.getSpecificCommitLink(),target:"_blank"},[h],8,["href"]),b,Object(o["i"])("a",{href:n.getRepoSenseHomeLink(),target:"_blank"},[m],8,["href"]),f,Object(o["i"])("a",{href:n.getUserGuideLink(),target:"_blank"},[O],8,["href"]),Object(o["i"])("span",null,") on "+Object(o["z"])(r.creationDate),1)]),Object(o["i"])("div",g,[Object(o["i"])("span",null,Object(o["z"])(r.reportGenerationTime),1)])])]),right:Object(o["G"])(()=>[Object(o["i"])("div",j,[Object(o["i"])("div",y,[Object(o["i"])("div",w,["authorship"===r.tabType?(Object(o["o"])(),Object(o["e"])(E,{id:"tab-authorship",key:n.generateKey(r.tabInfo.tabAuthorship,["author","repo","isMergeGroup"]),info:r.tabInfo.tabAuthorship},null,8,["info"])):"zoom"===r.tabType?(Object(o["o"])(),Object(o["e"])(I,{id:"tab-zoom",key:n.generateKey(r.tabInfo.tabZoom,["zRepo","zAuthor","zFilterGroup","zTimeFrame"]),info:r.tabInfo.tabZoom},null,8,["info"])):(Object(o["o"])(),Object(o["e"])("div",v,[Object(o["i"])("div",T,[C,k,Object(o["i"])("p",null,[S,Object(o["i"])(N,{icon:"code"}),F,z,D,Object(o["i"])(N,{icon:"list-ul"}),M,R,G,Object(o["i"])(N,{icon:"caret-right"}),A]),Object(o["i"])("p",null,[B,Object(o["i"])("a",{href:n.getUsingReportsUserGuideLink(),target:"_blank"},[_],8,["href"]),H])])]))])])],512)]),_:1},8,["is-tab-active","onCloseTab"])):(Object(o["o"])(),Object(o["e"])(o["a"],{key:1},[L,Object(o["i"])("form",U,[Object(o["i"])("input",{type:"file",accept:".zip",onChange:t[1]||(t[1]=(...e)=>n.updateReportZip&&n.updateReportZip(...e))},null,32)])],64))])}var E=i("8a14"),I=i("5502");const N={class:"left-resize-container"},$=Object(o["i"])("i",{class:"fas fa-caret-right"},null,-1);function P(e,t,i,s,r,n){return Object(o["o"])(),Object(o["e"])("div",{id:"app-wrapper",style:n.appStyles,onMousemove:t[3]||(t[3]=(...e)=>n.mouseMove&&n.mouseMove(...e)),onMouseup:t[4]||(t[4]=(...e)=>n.deregisterMouseMove&&n.deregisterMouseMove(...e)),onMouseleave:t[5]||(t[5]=(...e)=>n.deregisterMouseMove&&n.deregisterMouseMove(...e))},[Object(o["i"])("div",{id:"tab-resize-guide",style:n.guideStyles},null,4),Object(o["i"])("div",N,[Object(o["v"])(e.$slots,"left")]),Object(o["H"])(Object(o["i"])("div",{id:"tab-resize",onMousedown:t[2]||(t[2]=Object(o["J"])((...e)=>n.registerMouseMove&&n.registerMouseMove(...e),["left"]))},[Object(o["i"])("div",{class:"tab-close",onClick:t[1]||(t[1]=t=>e.$emit("close-tab"))},[$])],544),[[o["E"],i.isTabActive]]),i.isTabActive?(Object(o["o"])(),Object(o["e"])("div",{key:0,class:"right-resize-container",style:n.rightContainerStyles},[Object(o["v"])(e.$slots,"right")],4)):Object(o["f"])("",!0)],36)}const W=13.25,V=17,Z=2,J=(e,t)=>{let i=0;return(...o)=>{Date.now()-i>e&&(i=Date.now(),t(...o))}};var K={name:"v-resizer",props:{isTabActive:{type:Boolean,default:!0}},data(){return{guideWidth:(.5*window.innerWidth-Z/2)/window.innerWidth,flexWidth:.5,isResizing:!1}},computed:{appStyles(){return this.isResizing?"user-select: none; cursor: col-resize;":""},guideStyles(){return this.isResizing?`display: block; right: ${100*this.guideWidth}%;`:""},rightContainerStyles(){return`flex: 0 0 ${100*this.flexWidth}%;`},mouseMove(){return this.isResizing?J(25,e=>{this.guideWidth=(Math.min(Math.max(window.innerWidth-e.clientX,V+W),window.innerWidth-V)-Z/2)/window.innerWidth}):()=>{}}},methods:{registerMouseMove(){this.isResizing=!0},deregisterMouseMove(){this.isResizing=!1,this.flexWidth=(this.guideWidth*window.innerWidth+Z/2)/window.innerWidth}}};K.render=P;var q=K;const Y=Object(o["K"])("data-v-509ffbc9");Object(o["q"])("data-v-509ffbc9");const X={id:"zoom"},Q=Object(o["i"])("div",{class:"panel-title"},[Object(o["i"])("span",null,"Commits Panel")],-1),ee={key:0,class:"toolbar--multiline"},te={class:"panel-heading"},ie={class:"group-name"},oe={key:0},se={key:0,class:"author"},re=Object(o["i"])("span",null,"↳  ",-1),ne={key:0},ae={key:1},le={class:"period"},ce=Object(o["i"])("span",null,"↳  ",-1),de={class:"zoom__title"},pe={class:"zoom__title--granularity"},ue={class:"zoom__title--tags"},he={class:"sorting mui-form--inline"},be={class:"mui-select sort-by"},me=Object(o["i"])("option",{value:"time"},"Time",-1),fe=Object(o["i"])("option",{value:"lineOfCode"},"LoC",-1),Oe=Object(o["i"])("label",null,"sort by",-1),ge={class:"mui-select sort-order"},je=Object(o["i"])("option",{value:!0},"Descending",-1),ye=Object(o["i"])("option",{value:!1},"Ascending",-1),we=Object(o["i"])("label",null,"order",-1),ve={class:"fileTypes"},Te={key:0,class:"checkboxes mui-form--inline"},Ce={style:{"background-color":"#000000",color:"#ffffff"}},ke=Object(o["i"])("span",null,"All ",-1),Se={key:0},Fe={key:1},ze={class:"within-border"},De={key:0,class:"not-within-border"},Me={class:"tooltip"},Re=Object(o["i"])("span",{class:"tooltip-text"},"Click to show/hide the commit message body",-1),Ge={key:2,class:"body"},Ae=Object(o["i"])("div",{class:"dashed-border"},null,-1);Object(o["p"])();const Be=Y((e,t,i,s,r,n)=>{const a=Object(o["w"])("font-awesome-icon"),l=Object(o["w"])("v-ramp");return Object(o["o"])(),Object(o["e"])("div",X,[Q,n.filteredUser.commits.length&&n.totalCommitMessageBodyCount?(Object(o["o"])(),Object(o["e"])("div",ee,[r.expandedCommitMessagesCount<n.totalCommitMessageBodyCount?(Object(o["o"])(),Object(o["e"])("a",{key:0,onClick:t[1]||(t[1]=e=>n.toggleAllCommitMessagesBody(!0))},"show all commit messages")):Object(o["f"])("",!0),r.expandedCommitMessagesCount>0?(Object(o["o"])(),Object(o["e"])("a",{key:1,onClick:t[2]||(t[2]=e=>n.toggleAllCommitMessagesBody(!1))},"hide all commit messages")):Object(o["f"])("",!0)])):Object(o["f"])("",!0),Object(o["i"])("div",te,[Object(o["i"])("div",ie,["groupByAuthors"===i.info.zFilterGroup?(Object(o["o"])(),Object(o["e"])("span",oe,Object(o["z"])(n.filteredUser.displayName)+" ("+Object(o["z"])(n.filteredUser.name)+")",1)):(Object(o["o"])(),Object(o["e"])("a",{key:1,href:i.info.zLocation,target:"_blank",title:"Click to open the repo"},[Object(o["i"])("span",null,Object(o["z"])(n.filteredUser.repoName),1)],8,["href"]))]),i.info.zIsMerge?Object(o["f"])("",!0):(Object(o["o"])(),Object(o["e"])("div",se,[re,"groupByAuthors"===i.info.zFilterGroup?(Object(o["o"])(),Object(o["e"])("span",ne,Object(o["z"])(n.filteredUser.repoName),1)):(Object(o["o"])(),Object(o["e"])("span",ae,Object(o["z"])(n.filteredUser.displayName)+" ("+Object(o["z"])(n.filteredUser.name)+")",1))])),Object(o["i"])("div",le,[ce,Object(o["i"])("span",null,Object(o["z"])(i.info.zSince)+" to "+Object(o["z"])(i.info.zUntil)+"  ",1),Object(o["i"])("a",{onClick:t[3]||(t[3]=(...e)=>n.openSummary&&n.openSummary(...e))},"[Show ramp chart for this period]")])]),Object(o["i"])("div",de,[Object(o["i"])("div",pe,"granularity: one ramp per "+Object(o["z"])(i.info.zTimeFrame),1),Object(o["i"])("div",ue,[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(n.filteredUser.commits,e=>(Object(o["o"])(),Object(o["e"])(o["a"],null,[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(e.commitResults,e=>(Object(o["o"])(),Object(o["e"])(o["a"],null,[e.tags?(Object(o["o"])(!0),Object(o["e"])(o["a"],{key:0},Object(o["u"])(e.tags,t=>(Object(o["o"])(),Object(o["e"])("div",{class:"tag","vbind:key":"tag",onClick:i=>n.scrollToCommit(t,"tag "+e.hash)},[Object(o["i"])(a,{icon:"tags"}),Object(o["i"])("span",null," "+Object(o["z"])(t),1)],8,["onClick"]))),256)):Object(o["f"])("",!0)],64))),256))],64))),256))])]),Object(o["i"])(l,{groupby:i.info.zFilterGroup,user:n.filteredUser,tframe:i.info.zTimeFrame,sdate:i.info.zSince,udate:i.info.zUntil,avgsize:i.info.zAvgCommitSize,mergegroup:i.info.zIsMerge,fromramp:i.info.zFromRamp},null,8,["groupby","user","tframe","sdate","udate","avgsize","mergegroup","fromramp"]),Object(o["i"])("div",he,[Object(o["i"])("div",be,[Object(o["H"])(Object(o["i"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.commitsSortType=e)},[me,fe],512),[[o["C"],r.commitsSortType]]),Oe]),Object(o["i"])("div",ge,[Object(o["H"])(Object(o["i"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.toReverseSortedCommits=e)},[je,ye],512),[[o["C"],r.toReverseSortedCommits]]),we])]),Object(o["i"])("div",ve,[r.fileTypes.length>0?(Object(o["o"])(),Object(o["e"])("div",Te,[Object(o["i"])("label",Ce,[Object(o["H"])(Object(o["i"])("input",{class:"mui-checkbox--fileType",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>n.isSelectAllChecked=e),value:"all"},null,512),[[o["A"],n.isSelectAllChecked]]),ke]),(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(r.fileTypes,i=>(Object(o["o"])(),Object(o["e"])("label",{key:i,style:{"background-color":e.fileTypeColors[i],color:n.getFontColor(e.fileTypeColors[i])}},[Object(o["H"])(Object(o["i"])("input",{class:"mui-checkbox--fileType",type:"checkbox",value:i,onChange:t[7]||(t[7]=(...e)=>n.updateSelectedFileTypesHash&&n.updateSelectedFileTypesHash(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>r.selectedFileTypes=e)},null,40,["value"]),[[o["A"],r.selectedFileTypes]]),Object(o["i"])("span",null,Object(o["z"])(i)+"  ",1)],4))),128))])):Object(o["f"])("",!0)]),(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(n.selectedCommits,s=>(Object(o["o"])(),Object(o["e"])("div",{class:"zoom__day",key:s.date},["week"===i.info.zTimeFrame?(Object(o["o"])(),Object(o["e"])("h3",Se,"Week of "+Object(o["z"])(s.date),1)):(Object(o["o"])(),Object(o["e"])("h3",Fe,Object(o["z"])(s.date),1)),(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(s.commitResults,i=>(Object(o["o"])(),Object(o["e"])("div",{class:["commit-message",{"message-body active":""!==i.messageBody}],tabindex:"-1",key:i.hash},[Object(o["i"])("a",{class:"message-title",href:n.getSliceLink(i),target:"_blank"},[Object(o["i"])("div",ze,Object(o["z"])(i.messageTitle.substr(0,50)),1),i.messageTitle.length>50?(Object(o["o"])(),Object(o["e"])("div",De,Object(o["z"])(i.messageTitle.substr(50)),1)):Object(o["f"])("",!0)],8,["href"]),Object(o["i"])("span",null,"  ("+Object(o["z"])(i.insertions)+" lines)  ",1),Object(o["i"])("template",null,[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(n.filterSelectedFileTypes(Object.keys(i.fileTypesAndContributionMap)),t=>(Object(o["o"])(),Object(o["e"])("span",{class:"fileTypeLabel","vbind:key":"fileType",style:{"background-color":e.fileTypeColors[t],color:n.getFontColor(e.fileTypeColors[t])}},Object(o["z"])(t),5))),256))]),i.tags?(Object(o["o"])(!0),Object(o["e"])(o["a"],{key:0},Object(o["u"])(i.tags,e=>(Object(o["o"])(),Object(o["e"])("div",{class:["tag",[""+i.hash,e]],tabindex:"-1"},[Object(o["i"])(a,{icon:"tags"}),Object(o["i"])("span",null," "+Object(o["z"])(e),1)],2))),256)):Object(o["f"])("",!0),""!==i.messageBody?(Object(o["o"])(),Object(o["e"])("a",{key:1,onClick:t[9]||(t[9]=(...e)=>n.updateExpandedCommitMessagesCount&&n.updateExpandedCommitMessagesCount(...e)),onclick:"toggleNext(this)"},[Object(o["i"])("div",Me,[Object(o["i"])(a,{class:"commit-message--button",icon:"ellipsis-h"}),Re])])):Object(o["f"])("",!0),""!==i.messageBody?(Object(o["o"])(),Object(o["e"])("div",Ge,[Object(o["i"])("pre",null,[Object(o["h"])(Object(o["z"])(i.messageBody),1),Ae])])):Object(o["f"])("",!0)],2))),128))]))),128))])}),_e=Object(o["K"])("data-v-6f135e84");Object(o["q"])("data-v-6f135e84");const He={class:"ramp"};Object(o["p"])();const Le=_e((e,t,i,s,r,n)=>(Object(o["o"])(),Object(o["e"])("div",He,["commit"===i.tframe?(Object(o["o"])(!0),Object(o["e"])(o["a"],{key:0},Object(o["u"])(i.user.commits,(e,s)=>(Object(o["o"])(),Object(o["e"])(o["a"],null,[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(e.commitResults,(r,a)=>(Object(o["o"])(),Object(o["e"])(o["a"],null,[r.insertions>0?(Object(o["o"])(),Object(o["e"])("a",{key:0,class:["ramp__slice","ramp__slice--color"+n.getSliceColor(e.date)],draggable:"false",onClick:t[1]||(t[1]=(...e)=>n.rampClick&&n.rampClick(...e)),href:n.getLink(i.user,r),target:"_blank",title:n.getContributionMessage(e,r),style:{zIndex:i.user.commits.length-s,borderLeftWidth:n.getWidth(r)+"em",right:100*(n.getSlicePos(e.date)+n.getCommitPos(a,e.commitResults.length))+"%"}},null,14,["href","title"])):Object(o["f"])("",!0)],64))),256))],64))),256)):(Object(o["o"])(),Object(o["e"])(o["a"],{key:1},[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(i.user.commits,(e,t)=>(Object(o["o"])(),Object(o["e"])(o["a"],null,[],64))),256)),e.slice.insertions>0?(Object(o["o"])(),Object(o["e"])("a",{key:0,class:["ramp__slice","ramp__slice--color"+n.getSliceColor(e.slice.date)],draggable:"false",title:n.getContributionMessage(e.slice),onClick:t[2]||(t[2]=t=>n.openTabZoom(i.user,e.slice,t)),style:{zIndex:i.user.commits.length-e.j,borderLeftWidth:n.getWidth(e.slice)+"em",right:100*n.getSlicePos("day"===i.tframe?e.slice.date:e.slice.endDate)+"%"}},null,14,["title"])):Object(o["f"])("",!0)],64))])));var Ue={name:"v-ramp",props:["groupby","user","tframe","avgsize","sdate","udate","mergegroup","fromramp","filtersearch"],data(){return{rampSize:.01}},methods:{getLink(e,t){return this.mergegroup?`${window.getBaseLink(t.repoId)}/commit/${t.hash}`:`${window.getBaseLink(e.repoId)}/commit/${t.hash}`},getWidth(e){if(0===e.insertions)return 0;const t=e.insertions/this.avgsize*100;return Math.max(t*this.rampSize,.5)},getContributionMessage(e,t){let i="";return"commit"===this.tframe?`[${e.date}] ${t.messageTitle}: ${t.insertions} lines`:(i="day"===this.tframe?`[${e.date}] Daily `:`[${e.date} till ${e.endDate}] Weekly `,i+=`contribution: ${e.insertions} lines`,i)},openTabZoom(e,t,i){if(window.isMacintosh?i.metaKey:i.ctrlKey)return;const o={...e};o.commits=e.dailyCommits;const s={zRepo:e.repoName,zAuthor:e.name,zFilterGroup:this.groupby,zTimeFrame:"commit",zAvgCommitSize:t.insertions,zUser:o,zLocation:window.getBaseLink(e.repoId),zSince:t.date,zUntil:"day"===this.tframe?t.date:t.endDate,zIsMerge:this.mergegroup,zFromRamp:!0,zFilterSearch:this.filtersearch};window.deactivateAllOverlays(),this.$store.commit("updateTabZoomInfo",s)},getCommitPos(e,t){return(t-e-1)*window.DAY_IN_MS/t/(this.getTotalForPos(this.sdate,this.udate)+window.DAY_IN_MS)},getSlicePos(e){const t=this.getTotalForPos(this.sdate,this.udate);return(new Date(this.udate)-new Date(e))/(t+window.DAY_IN_MS)},getTotalForPos(e,t){return new Date(t)-new Date(e)},getSliceColor(e){const t=this.fromramp?new Date(this.sdate).getTime():new Date(e).getTime();return t/window.DAY_IN_MS%5},rampClick(e){const t=window.isMacintosh?e.metaKey:e.ctrlKey;t&&e.preventDefault()}}};i("4b19");Ue.render=Le,Ue.__scopeId="data-v-6f135e84";var xe=Ue,Ee={name:"v-zoom",props:["info"],data(){return{showAllCommitMessageBody:!0,expandedCommitMessagesCount:this.totalCommitMessageBodyCount,commitsSortType:"time",toReverseSortedCommits:!0,isCommitsFinalized:!1,selectedFileTypes:[],fileTypes:[]}},computed:{sortingFunction(){const e="time"===this.commitsSortType?e=>e.date:e=>e.insertions;return(t,i)=>(this.toReverseSortedCommits?-1:1)*window.comparator(e)(t,i)},filteredUser(){const{zUser:e,zSince:t,zUntil:i,zTimeFrame:o}=this.info,s=Object.assign({},e),r="week"===o?"endDate":"date";return s.commits=e.commits.filter(e=>e[r]>=t&&e[r]<=i).sort(this.sortingFunction),s},selectedCommits(){const e=[];return this.filteredUser.commits.forEach(t=>{const i={...t};i.commitResults=[],t.commitResults.forEach(e=>{Object.keys(e.fileTypesAndContributionMap).some(e=>-1!==this.selectedFileTypes.indexOf(e))&&i.commitResults.push(e)}),i.commitResults.length>0&&e.push(i)}),e},totalCommitMessageBodyCount(){let e=0;return this.selectedCommits.forEach(t=>{t.commitResults.forEach(t=>{""!==t.messageBody&&(e+=1)})}),e},isSelectAllChecked:{get(){return this.selectedFileTypes.length===this.fileTypes.length},set(e){this.selectedFileTypes=e?this.fileTypes.slice():[],this.updateSelectedFileTypesHash()}},...Object(I["b"])(["fileTypeColors"])},watch:{selectedFileTypes(){this.$nextTick(()=>{this.updateExpandedCommitMessagesCount()})},commitsSortType(){window.addHash("zCST",this.commitsSortType),window.encodeHash()},toReverseSortedCommits(){window.addHash("zRSC",this.toReverseSortedCommits),window.encodeHash()}},created(){this.initiate()},mounted(){this.setInfoHash()},beforeUnmount(){this.removeZoomHashes()},methods:{initiate(){this.info.zUser&&(this.updateFileTypes(),this.selectedFileTypes=this.fileTypes.slice())},getFontColor(e){return window.getFontColor(e)},openSummary(){const e={since:this.info.zSince,until:this.info.zUntil};this.$store.commit("updateSummaryDates",e)},getSliceLink(e){return this.info.zIsMerge?`${window.getBaseLink(e.repoId)}/commit/${e.hash}`:`${window.getBaseLink(this.info.zUser.repoId)}/commit/${e.hash}`},scrollToCommit(e,t){const i=this.$el.getElementsByClassName(`${t} ${e}`)[0];i&&i.focus()},updateFileTypes(){const e=new Set;this.filteredUser.commits.forEach(t=>{t.commitResults.forEach(t=>{Object.keys(t.fileTypesAndContributionMap).forEach(t=>{e.add(t)})})}),this.fileTypes=Object.keys(this.filteredUser.fileTypeContribution).filter(t=>e.has(t))},retrieveHashes(){this.retrieveSortHash(),this.retrieveSelectedFileTypesHash()},retrieveSortHash(){window.decodeHash();const e=window.hashParams;e.zCST&&(this.commitsSortType=e.zCST),e.zRSC&&(this.toReverseSortedCommits="true"===e.zRSC)},retrieveSelectedFileTypesHash(){window.decodeHash();const e=window.hashParams;e.zFT&&(this.selectedFileTypes=e.zFT.split(window.HASH_DELIMITER).filter(e=>this.fileTypes.includes(e)))},updateSelectedFileTypesHash(){const e=this.selectedFileTypes.length>0?this.selectedFileTypes.reduce((e,t)=>`${e}~${t}`):"";window.addHash("zFT",e),window.encodeHash()},setInfoHash(){const{addHash:e,encodeHash:t}=window,{zAvgCommitSize:i,zSince:o,zUntil:s,zFilterGroup:r,zTimeFrame:n,zIsMerge:a,zAuthor:l,zRepo:c,zFromRamp:d,zFilterSearch:p}=this.info;e("zA",l),e("zR",c),e("zACS",i),e("zS",o),e("zFS",p),e("zU",s),e("zMG",a),e("zFTF",n),e("zFGS",r),e("zFR",d),t()},toggleAllCommitMessagesBody(e){this.showAllCommitMessageBody=e;const t=this.showAllCommitMessageBody?"commit-message message-body active":"commit-message message-body",i=document.getElementsByClassName("commit-message message-body");Array.from(i).forEach(e=>{e.className=t}),this.expandedCommitMessagesCount=e?this.totalCommitMessageBodyCount:0},updateExpandedCommitMessagesCount(){this.expandedCommitMessagesCount=document.getElementsByClassName("commit-message message-body active").length},removeZoomHashes(){window.removeHash("zA"),window.removeHash("zR"),window.removeHash("zFS"),window.removeHash("zACS"),window.removeHash("zS"),window.removeHash("zU"),window.removeHash("zFGS"),window.removeHash("zFTF"),window.removeHash("zMG"),window.removeHash("zFT"),window.removeHash("zCST"),window.removeHash("zRSC"),window.encodeHash()},filterSelectedFileTypes(e){return e.filter(e=>this.selectedFileTypes.includes(e))}},components:{FontAwesomeIcon:r["a"],vRamp:xe}};i("16de");Ee.render=Be,Ee.__scopeId="data-v-509ffbc9";var Ie=Ee;const Ne={id:"summary"},$e={class:"summary-picker mui-form--inline",onsubmit:"return false;"},Pe={class:"summary-picker__section"},We={class:"mui-textfield search_box"},Ve=Object(o["i"])("label",null,"search",-1),Ze={class:"mui-select grouping"},Je=Object(o["i"])("option",{value:"groupByNone"},"None",-1),Ke=Object(o["i"])("option",{value:"groupByRepos"},"Repo/Branch",-1),qe=Object(o["i"])("option",{value:"groupByAuthors"},"Author",-1),Ye=Object(o["i"])("label",null,"group by",-1),Xe={class:"mui-select sort-group"},Qe=Object(o["g"])('<option value="groupTitle">↑ group title</option><option value="groupTitle dsc">↓ group title</option><option value="totalCommits">↑ contribution</option><option value="totalCommits dsc">↓ contribution</option><option value="variance">↑ variance</option><option value="variance dsc">↓ variance</option>',6),et=Object(o["i"])("label",null,"sort groups by",-1),tt={class:"mui-select sort-within-group"},it=Object(o["g"])('<option value="title">↑ title</option><option value="title dsc">↓ title</option><option value="totalCommits">↑ contribution</option><option value="totalCommits dsc">↓ contribution</option><option value="variance">↑ variance</option><option value="variance dsc">↓ variance</option>',6),ot=Object(o["i"])("label",null,"sort within groups by",-1),st={class:"mui-select granularity"},rt=Object(o["i"])("option",{value:"commit"},"Commit",-1),nt=Object(o["i"])("option",{value:"day"},"Day",-1),at=Object(o["i"])("option",{value:"week"},"Week",-1),lt=Object(o["i"])("label",null,"granularity",-1),ct={class:"mui-textfield"},dt=Object(o["i"])("label",null,"since",-1),pt={class:"mui-textfield"},ut=Object(o["i"])("label",null,"until",-1),ht={class:"mui-textfield"},bt={class:"summary-picker__checkboxes summary-picker__section"},mt={class:"filter-breakdown"},ft=Object(o["i"])("span",null,"breakdown by file type",-1),Ot=Object(o["i"])("span",null,"merge all groups",-1),gt={key:0,class:"error-message-box"},jt=Object(o["i"])("div",{class:"error-message-box__message"},"The following issues occurred when analyzing the following repositories:",-1),yt={class:"error-message-box__failed-repo","vbind:key":"errorBlock.repoName"},wt=Object(o["i"])("i",{class:"fas fa-exclamation"},null,-1),vt={class:"error-message-box__failed-repo--name"},Tt={key:0,class:"error-message-box__failed-repo--reason"},Ct=Object(o["i"])("span",null,"Oops, an unexpected error occurred.If this is due to a problem in RepoSense, please report in ",-1),kt=Object(o["i"])("strong",null,"our issue tracker ",-1),St=Object(o["i"])("span",null,"or email us at ",-1),Ft={key:1,class:"error-message-box__failed-repo--reason"},zt={key:1,class:"fileTypes"},Dt={key:0,class:"checkboxes mui-form--inline"},Mt={style:{"background-color":"#000000",color:"#ffffff"}},Rt=Object(o["i"])("span",null,"All: ",-1);function Gt(e,t,i,s,r,n){const a=Object(o["w"])("v-summary-charts");return Object(o["o"])(),Object(o["e"])("div",Ne,[Object(o["i"])("form",$e,[Object(o["i"])("div",Pe,[Object(o["i"])("div",We,[Object(o["H"])(Object(o["i"])("input",{type:"text",onChange:t[1]||(t[1]=(...e)=>n.updateFilterSearch&&n.updateFilterSearch(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>r.filterSearch=e)},null,544),[[o["D"],r.filterSearch]]),Ve,Object(o["i"])("button",{class:"mui-btn mui-btn--raised",type:"button",onClick:t[3]||(t[3]=Object(o["J"])((...e)=>n.resetFilterSearch&&n.resetFilterSearch(...e),["prevent"]))},"x")]),Object(o["i"])("div",Ze,[Object(o["H"])(Object(o["i"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.filterGroupSelection=e)},[Je,Ke,qe],512),[[o["C"],r.filterGroupSelection]]),Ye]),Object(o["i"])("div",Xe,[Object(o["H"])(Object(o["i"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.sortGroupSelection=e)},[Qe],512),[[o["C"],r.sortGroupSelection]]),et]),Object(o["i"])("div",tt,[Object(o["H"])(Object(o["i"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.sortWithinGroupSelection=e),disabled:"groupByNone"===r.filterGroupSelection||n.allGroupsMerged},[it],8,["disabled"]),[[o["C"],r.sortWithinGroupSelection]]),ot]),Object(o["i"])("div",st,[Object(o["H"])(Object(o["i"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.filterTimeFrame=e)},[rt,nt,at],512),[[o["C"],r.filterTimeFrame]]),lt]),Object(o["i"])("div",ct,[r.isSafariBrowser?(Object(o["o"])(),Object(o["e"])("input",{key:0,type:"text",placeholder:"yyyy-mm-dd",value:r.filterSinceDate,onKeyup:t[8]||(t[8]=Object(o["I"])((...e)=>n.updateTmpFilterSinceDate&&n.updateTmpFilterSinceDate(...e),["enter"])),onkeydown:"formatInputDateOnKeyDown(event)",oninput:"appendDashInputDate(event)",maxlength:"10"},null,40,["value"])):(Object(o["o"])(),Object(o["e"])("input",{key:1,type:"date",name:"since",value:r.filterSinceDate,onInput:t[9]||(t[9]=(...e)=>n.updateTmpFilterSinceDate&&n.updateTmpFilterSinceDate(...e)),min:r.minDate,max:r.filterUntilDate},null,40,["value","min","max"])),dt]),Object(o["i"])("div",pt,[r.isSafariBrowser?(Object(o["o"])(),Object(o["e"])("input",{key:0,type:"text",placeholder:"yyyy-mm-dd",value:r.filterUntilDate,onKeyup:t[10]||(t[10]=Object(o["I"])((...e)=>n.updateTmpFilterUntilDate&&n.updateTmpFilterUntilDate(...e),["enter"])),onkeydown:"formatInputDateOnKeyDown(event)",oninput:"appendDashInputDate(event)",maxlength:"10"},null,40,["value"])):(Object(o["o"])(),Object(o["e"])("input",{key:1,type:"date",name:"until",value:r.filterUntilDate,onInput:t[11]||(t[11]=(...e)=>n.updateTmpFilterUntilDate&&n.updateTmpFilterUntilDate(...e)),min:r.filterSinceDate,max:r.maxDate},null,40,["value","min","max"])),ut]),Object(o["i"])("div",ht,[Object(o["i"])("a",{onClick:t[12]||(t[12]=(...e)=>n.resetDateRange&&n.resetDateRange(...e))},"Reset date range")]),Object(o["i"])("div",bt,[Object(o["i"])("label",mt,[Object(o["H"])(Object(o["i"])("input",{class:"mui-checkbox",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=e=>r.filterBreakdown=e),onChange:t[14]||(t[14]=e=>n.setSummaryHash())},null,544),[[o["A"],r.filterBreakdown]]),ft]),Object(o["i"])("label",{class:"merge-group",style:"groupByNone"===r.filterGroupSelection?{opacity:.5}:{opacity:1}},[Object(o["H"])(Object(o["i"])("input",{class:"mui-checkbox",type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>n.allGroupsMerged=e),disabled:"groupByNone"===r.filterGroupSelection},null,8,["disabled"]),[[o["A"],n.allGroupsMerged]]),Ot],4)])])]),Object.entries(i.errorMessages).length?(Object(o["o"])(),Object(o["e"])("div",gt,[Object(o["i"])("div",{class:"error-message-box__close-button",onClick:t[16]||(t[16]=e=>n.dismissTab(e))},"×"),jt,(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(i.errorMessages,e=>(Object(o["o"])(),Object(o["e"])("div",yt,[wt,Object(o["i"])("span",vt,Object(o["z"])(e.repoName),1),e.errorMessage.startsWith("Unexpected error stack trace")?(Object(o["o"])(),Object(o["e"])("div",Tt,[Ct,Object(o["i"])("a",{href:n.getReportIssueGitHubLink(e.errorMessage),target:"_blank"},[kt],8,["href"]),St,Object(o["i"])("a",{href:n.getReportIssueEmailLink(e.errorMessage)},[Object(o["i"])("span",null,Object(o["z"])(n.getReportIssueEmailAddress()),1)],8,["href"])])):(Object(o["o"])(),Object(o["e"])("div",Ft,Object(o["z"])(e.errorMessage),1))]))),256))])):Object(o["f"])("",!0),r.filterBreakdown?(Object(o["o"])(),Object(o["e"])("div",zt,[Object.keys(r.fileTypeColors).length>0?(Object(o["o"])(),Object(o["e"])("div",Dt,[Object(o["i"])("label",Mt,[Object(o["H"])(Object(o["i"])("input",{class:"mui-checkbox--fileType",id:"all",type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=e=>n.checkAllFileTypes=e)},null,512),[[o["A"],n.checkAllFileTypes]]),Rt]),(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(Object.keys(r.fileTypeColors),e=>(Object(o["o"])(),Object(o["e"])("label",{key:e,style:{"background-color":r.fileTypeColors[e],color:this.getFontColor(r.fileTypeColors[e])}},[Object(o["H"])(Object(o["i"])("input",{class:"mui-checkbox--fileType",type:"checkbox",id:e,value:e,"onUpdate:modelValue":t[18]||(t[18]=e=>r.checkedFileTypes=e)},null,8,["id","value"]),[[o["A"],r.checkedFileTypes]]),Object(o["i"])("span",null,Object(o["z"])(e),1)],4))),128))])):Object(o["f"])("",!0)])):Object(o["f"])("",!0),Object(o["i"])(a,{filtered:r.filtered,"checked-file-types":r.checkedFileTypes,"avg-contribution-size":n.avgContributionSize,"filter-group-selection":r.filterGroupSelection,"filter-breakdown":r.filterBreakdown,"filter-time-frame":r.filterTimeFrame,"filter-since-date":r.filterSinceDate,"filter-until-date":r.filterUntilDate,"filter-search":r.filterSearch,"min-date":r.minDate,"max-date":r.maxDate,onRestoreZoomCommits:n.restoreZoomFiltered},null,8,["filtered","checked-file-types","avg-contribution-size","filter-group-selection","filter-breakdown","filter-time-frame","filter-since-date","filter-until-date","filter-search","min-date","max-date","onRestoreZoomCommits"])])}var At=i("6125"),Bt=i.n(At);const _t={id:"summary-charts"},Ht={class:"summary-charts"},Lt={key:0,class:"summary-charts__title"},Ut={class:"summary-charts__title--index"},xt={class:"summary-charts__title--groupname"},Et={class:"summary-charts__title--contribution"},It={class:"tooltip"},Nt={key:0,class:"tooltip-text"},$t={key:1,class:"tooltip-text"},Pt={class:"tooltip"},Wt=Object(o["i"])("span",{class:"tooltip-text"},"Click to merge group",-1),Vt={class:"tooltip"},Zt=Object(o["i"])("span",{class:"tooltip-text"},"Click to expand group",-1),Jt={class:"tooltip"},Kt=Object(o["i"])("span",{class:"tooltip-text"},"Click to view group's repo",-1),qt={class:"tooltip"},Yt=Object(o["i"])("span",{class:"tooltip-text"},"Click to view author's profile",-1),Xt={class:"tooltip"},Qt=Object(o["i"])("span",{class:"tooltip-text"},"Click to view group's code",-1),ei={class:"tooltip"},ti=Object(o["i"])("span",{class:"tooltip-text"},"Click to view breakdown of commits",-1),ii={class:"summary-charts__title--percentile"},oi={key:1,class:"summary-charts__fileType--breakdown"},si={class:"summary-chart"},ri={key:0,class:"summary-chart__title"},ni={class:"summary-chart__title--index"},ai={key:0,class:"summary-chart__title--repo"},li={key:1,class:"summary-chart__title--author-repo"},ci={class:"summary-chart__title--contribution mini-font"},di={class:"tooltip"},pi=Object(o["i"])("span",{class:"tooltip-text"},"Click to view repo",-1),ui={class:"tooltip"},hi=Object(o["i"])("span",{class:"tooltip-text"},"Click to view author's profile",-1),bi={class:"tooltip"},mi=Object(o["i"])("span",{class:"tooltip-text"},"Click to view author's contribution",-1),fi={class:"tooltip"},Oi=Object(o["i"])("span",{class:"tooltip-text"},"Click to view breakdown of commits",-1),gi={key:5,class:"summary-chart__title--percentile"},ji=Object(o["i"])("div",{class:"overlay"},null,-1),yi={class:"summary-chart__contribution"},wi={class:"summary-chart__contrib"};function vi(e,t,i,s,r,n){const a=Object(o["w"])("font-awesome-icon"),l=Object(o["w"])("v-ramp");return Object(o["o"])(),Object(o["e"])("div",_t,[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(n.filteredRepos,(t,s)=>(Object(o["o"])(),Object(o["e"])("div",Ht,["groupByNone"!==i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("div",Lt,[Object(o["i"])("div",Ut,Object(o["z"])(s+1),1),Object(o["i"])("div",xt,["groupByRepos"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])(o["a"],{key:0},[Object(o["h"])(Object(o["z"])(t[0].repoName),1)],64)):"groupByAuthors"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])(o["a"],{key:1},[Object(o["h"])(Object(o["z"])(t[0].displayName)+" ("+Object(o["z"])(t[0].name)+")",1)],64)):Object(o["f"])("",!0)]),Object(o["i"])("div",Et,[Object(o["i"])("div",It,[Object(o["h"])("["+Object(o["z"])(n.getGroupTotalContribution(t))+" lines]",1),"groupByRepos"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("span",Nt,"Total contribution of group")):"groupByAuthors"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("span",$t,"Total contribution of author")):Object(o["f"])("",!0)])]),n.isGroupMerged(n.getGroupName(t))?Object(o["f"])("",!0):(Object(o["o"])(),Object(o["e"])("a",{key:0,onClick:e=>n.handleMergeGroup(n.getGroupName(t))},[Object(o["i"])("div",Pt,[Object(o["i"])(a,{class:"icon-button",icon:["fas","chevron-up"]}),Wt])],8,["onClick"])),n.isGroupMerged(n.getGroupName(t))?(Object(o["o"])(),Object(o["e"])("a",{key:1,onClick:e=>n.handleExpandGroup(n.getGroupName(t))},[Object(o["i"])("div",Vt,[Object(o["i"])(a,{class:"icon-button",icon:["fas","chevron-down"]}),Zt])],8,["onClick"])):Object(o["f"])("",!0),"groupByRepos"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("a",{key:2,href:n.getRepoLink(t[0]),target:"_blank"},[Object(o["i"])("div",Jt,[Object(o["i"])(a,{class:"icon-button",icon:["fab","github"]}),Kt])],8,["href"])):"groupByAuthors"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("a",{key:3,href:n.getAuthorProfileLink(t[0].name),target:"_blank"},[Object(o["i"])("div",qt,[Object(o["i"])(a,{class:"icon-button",icon:"user"}),Yt])],8,["href"])):Object(o["f"])("",!0),n.isGroupMerged(n.getGroupName(t))?(Object(o["o"])(),Object(o["e"])(o["a"],{key:4},["groupByAuthors"!==i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("a",{key:0,onclick:"deactivateAllOverlays()",onClick:e=>n.openTabAuthorship(t[0],t,0,n.isGroupMerged(n.getGroupName(t)))},[Object(o["i"])("div",Xt,[Object(o["i"])(a,{class:"icon-button",icon:"code"}),Qt])],8,["onClick"])):Object(o["f"])("",!0),Object(o["i"])("a",{onclick:"deactivateAllOverlays()",onClick:e=>n.openTabZoom(t[0],i.filterSinceDate,i.filterUntilDate,n.isGroupMerged(n.getGroupName(t)))},[Object(o["i"])("div",ei,[Object(o["i"])(a,{class:"icon-button",icon:"list-ul"}),ti])],8,["onClick"])],64)):Object(o["f"])("",!0),Object(o["i"])("div",ii,Object(o["z"])(n.getPercentile(s))+" %",1)])):Object(o["f"])("",!0),i.filterBreakdown?(Object(o["o"])(),Object(o["e"])("div",oi,["groupByNone"!==i.filterGroupSelection?(Object(o["o"])(!0),Object(o["e"])(o["a"],{key:0},Object(o["u"])(n.getFileTypes(t),t=>(Object(o["o"])(),Object(o["e"])("div",{class:"summary-charts__fileType--breakdown__legend",key:t},[Object(o["i"])(a,{icon:"circle",style:{color:e.fileTypeColors[t]}},null,8,["style"]),Object(o["i"])("span",null,"  "+Object(o["z"])(t)+"  ",1)]))),128)):Object(o["f"])("",!0)])):Object(o["f"])("",!0),(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(t,(s,r)=>(Object(o["o"])(),Object(o["e"])("div",si,[n.isGroupMerged(n.getGroupName(t))?Object(o["f"])("",!0):(Object(o["o"])(),Object(o["e"])("div",ri,[Object(o["i"])("div",ni,Object(o["z"])(r+1),1),"groupByNone"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("div",ai,Object(o["z"])(s.repoName),1)):Object(o["f"])("",!0),"groupByAuthors"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("div",li,Object(o["z"])(s.repoName),1)):Object(o["f"])("",!0),"groupByAuthors"!==i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("div",{key:2,class:["summary-chart__title--name",{warn:"-"===s.name}]},Object(o["z"])(s.displayName)+" ("+Object(o["z"])(s.name)+")",3)):Object(o["f"])("",!0),Object(o["i"])("div",ci,"["+Object(o["z"])(s.checkedFileTypeContribution)+" lines]",1),"groupByRepos"!==i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("a",{key:3,href:n.getRepoLink(t[r]),target:"_blank"},[Object(o["i"])("div",di,[Object(o["i"])(a,{class:"icon-button",icon:["fab","github"]}),pi])],8,["href"])):Object(o["f"])("",!0),"groupByAuthors"!==i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("a",{key:4,href:n.getAuthorProfileLink(t[r].name),target:"_blank"},[Object(o["i"])("div",ui,[Object(o["i"])(a,{class:"icon-button",icon:"user"}),hi])],8,["href"])):Object(o["f"])("",!0),Object(o["i"])("a",{onclick:"deactivateAllOverlays()",onClick:e=>n.openTabAuthorship(s,t,r,n.isGroupMerged(n.getGroupName(t)))},[Object(o["i"])("div",bi,[Object(o["i"])(a,{class:"icon-button",icon:"code"}),mi])],8,["onClick"]),Object(o["i"])("a",{onclick:"deactivateAllOverlays()",onClick:e=>n.openTabZoom(s,i.filterSinceDate,i.filterUntilDate,n.isGroupMerged(n.getGroupName(t)))},[Object(o["i"])("div",fi,[Object(o["i"])(a,{class:"icon-button",icon:"list-ul"}),Oi])],8,["onClick"]),"groupByNone"===i.filterGroupSelection?(Object(o["o"])(),Object(o["e"])("div",gi,Object(o["z"])(n.getPercentile(r))+" %",1)):Object(o["f"])("",!0)])),Object(o["i"])("div",{class:"summary-chart__ramp",onClick:e=>n.openTabZoomSubrange(s,e,n.isGroupMerged(n.getGroupName(t)))},[Object(o["i"])(l,{groupby:i.filterGroupSelection,user:s,tframe:i.filterTimeFrame,sdate:i.filterSinceDate,udate:i.filterUntilDate,avgsize:n.avgCommitSize,mergegroup:n.isGroupMerged(n.getGroupName(t)),filtersearch:i.filterSearch},null,8,["groupby","user","tframe","sdate","udate","avgsize","mergegroup","filtersearch"]),ji],8,["onClick"]),Object(o["i"])("div",yi,[i.filterBreakdown?(Object(o["o"])(!0),Object(o["e"])(o["a"],{key:0},Object(o["u"])(n.getFileTypeContributionBars(s.fileTypeContribution),(t,r)=>(Object(o["o"])(),Object(o["e"])("div",wi,[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(t,t=>(Object(o["o"])(),Object(o["e"])("div",{class:"summary-chart__contrib--bar",style:{width:t+"%","background-color":e.fileTypeColors[r]},title:r+": "+s.fileTypeContribution[r]+" lines, total: "+s.checkedFileTypeContribution+" lines (contribution from "+i.minDate+" to "+i.maxDate+")"},null,12,["title"]))),256))]))),256)):(Object(o["o"])(),Object(o["e"])("div",{key:1,class:"summary-chart__contrib",title:"Total contribution from "+i.minDate+" to "+i.maxDate+": "+s.checkedFileTypeContribution+" lines"},[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(n.getContributionBars(s.checkedFileTypeContribution),e=>(Object(o["o"])(),Object(o["e"])("div",{class:"summary-chart__contrib--bar",style:{width:e+"%"}},null,4))),256))],8,["title"]))])]))),256))]))),256))])}var Ti={name:"v-summary-charts",props:["checkedFileTypes","filtered","avgContributionSize","filterBreakdown","filterGroupSelection","filterTimeFrame","filterSinceDate","filterUntilDate","isMergeGroup","minDate","maxDate","filterSearch"],data(){return{drags:[]}},computed:{avgCommitSize(){let e=0,t=0;return this.filteredRepos.forEach(i=>{i.forEach(i=>{i.commits.forEach(i=>{i.insertions>0&&(t+=1,e+=i.insertions)})})}),e/t},filteredRepos(){return this.filtered.filter(e=>e.length>0)},...Object(I["b"])(["mergedGroups","fileTypeColors"])},methods:{getFileTypeContributionBars(e){let t=0;const i=100,o=2*this.avgContributionSize,s={};return Object.keys(e).filter(e=>this.checkedFileTypes.includes(e)).forEach(r=>{const n=e[r];let a=n/o*i;const l=[];if(t+a<i)l.push(a),t+=a;else{l.push(i-t),a-=i-t;const e=Math.floor(a/i);for(let t=0;t<e;t+=1)l.push(i);const o=a%i;0!==o&&l.push(o),t=o}s[r]=l}),s},getFileTypes(e){const t=[];return e.forEach(e=>{Object.keys(e.fileTypeContribution).forEach(e=>{this.checkedFileTypes.includes(e)&&!t.includes(e)&&t.push(e)})}),t},getGroupTotalContribution(e){return e.reduce((e,t)=>e+t.checkedFileTypeContribution,0)},getContributionBars(e){const t=[],i=2*this.avgContributionSize,o=parseInt(e/i,10);for(let r=0;r<o;r+=1)t.push(100);const s=e%i/i;return 0!==s&&t.push(100*s),t},getAuthorProfileLink(e){return"https://github.com/"+e},getRepoLink(e){const{REPOS:t}=window,{location:i,branch:o}=t[e.repoId];return Object.prototype.hasOwnProperty.call(i,"organization")?`${window.BASE_URL}/${i.organization}/${i.repoName}/tree/${o}`:e.location},openTabAuthorship(e,t,i,o){const{minDate:s,maxDate:r,checkedFileTypes:n}=this,a={minDate:s,maxDate:r,checkedFileTypes:n,author:e.name,repo:e.repoName,name:e.displayName,isMergeGroup:o,location:this.getRepoLink(t[i]),repoIndex:i};this.$store.commit("updateTabAuthorshipInfo",a)},openTabZoomSubrange(e,t,i){const o=window.isMacintosh?t.metaKey:t.ctrlKey;if(o&&(0===this.drags.length?this.dragViewDown(t):this.dragViewUp(t)),2===this.drags.length&&this.drags[1]-this.drags[0]){const t=new Date(this.filterUntilDate)-new Date(this.filterSinceDate),o=this.drags.map(e=>e*t/100),s=window.getDateStr(new Date(this.filterSinceDate).getTime()+o[0]),r=window.getDateStr(new Date(this.filterSinceDate).getTime()+o[1]);this.drags=[],this.openTabZoom(e,s,r,i)}},openTabZoom(e,t,i,o){const{avgCommitSize:s,filterGroupSelection:r,filterTimeFrame:n,filterSearch:a}=this,l=Object.assign({},e),c={zRepo:e.repoName,zAuthor:e.name,zFilterGroup:r,zTimeFrame:n,zAvgCommitSize:s,zUser:l,zLocation:this.getRepoLink(e),zSince:t,zUntil:i,zIsMerge:o,zFileTypeColors:this.fileTypeColors,zFromRamp:!1,zFilterSearch:a};this.$emit("restoreZoomCommits",c)},getBaseTarget(e){return"summary-chart__ramp"===e.className?e:this.getBaseTarget(e.parentElement)},dragViewDown(e){window.deactivateAllOverlays();const t=e.clientX,i=this.getBaseTarget(e.target);this.drags=[t];const o=i.offsetWidth,s=i.parentElement.offsetLeft,r=i.getElementsByClassName("overlay")[0];r.style.marginLeft="0",r.style.width=100*(t-s)/o+"%",r.className+=" edge"},dragViewUp(e){window.deactivateAllOverlays();const t=this.getBaseTarget(e.target),i=t.offsetWidth;this.drags.push(e.clientX),this.drags.sort((e,t)=>e-t);const o=t.parentElement.offsetLeft;this.drags=this.drags.map(e=>100*(e-o)/i);const s=t.getElementsByClassName("overlay")[0];s.style.marginLeft=this.drags[0]+"%",s.style.width=this.drags[1]-this.drags[0]+"%",s.className+=" show"},getPercentile(e){return"groupByNone"===this.filterGroupSelection?(Math.round(1e3*(e+1)/this.filtered[0].length)/10).toFixed(1):(Math.round(1e3*(e+1)/this.filtered.length)/10).toFixed(1)},getGroupName(e){return window.getGroupName(e,this.filterGroupSelection)},isGroupMerged(e){return this.mergedGroups.includes(e)},handleMergeGroup(e){const t=this.mergedGroups;t.push(e),this.$store.commit("updateMergedGroup",t)},handleExpandGroup(e){const t=this.mergedGroups.filter(t=>t!==e);this.$store.commit("updateMergedGroup",t)}},components:{vRamp:xe}};Ti.render=vi;var Ci=Ti;function ki(){const e=16777214;return"#"+Math.round(this.randomGenerator()*e+1).toString(16).padStart(6,"0")}function Si(e){let t,i,o,s=e[0]/255,r=e[1]/255,n=e[2]/255;return s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,t=(.4124*s+.3576*r+.1805*n)/.95047,i=(.2126*s+.7152*r+.0722*n)/1,o=(.0193*s+.1192*r+.9505*n)/1.08883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,[116*i-16,500*(t-i),200*(i-o)]}function Fi(e,t){const i=Si(e),o=Si(t),s=i[0]-o[0],r=i[1]-o[1],n=i[2]-o[2],a=Math.sqrt(i[1]*i[1]+i[2]*i[2]),l=Math.sqrt(o[1]*o[1]+o[2]*o[2]),c=a-l;let d=r*r+n*n-c*c;d=d<0?0:Math.sqrt(d);const p=1+.045*a,u=1+.015*a,h=s/1,b=c/p,m=d/u,f=h*h+b*b+m*m;return f<0?0:Math.sqrt(f)}function zi(e,t){const i=11;return e.some(e=>{const o=window.getHexToRGB(e),s=window.getHexToRGB(t);return Fi(o,s)<i})}function Di(e){let t=ki();while(zi(e,t))t=ki();return t}var Mi=Di;function Ri(e,t){return e+t.checkedFileTypeContribution}function Gi(e,t){return e+t.variance}function Ai(e,t){return"totalCommits"===t?e.reduce(Ri,0):"variance"===t?e.reduce(Gi,0):e[0][t]}function Bi(e,t){const i=[],{sortingWithinOption:o,sortingOption:s,isSortingDsc:r,isSortingWithinDsc:n}=t,a="title"===o?"displayName":o,l="groupTitle"===s?"searchPath":s;return e.forEach(e=>{"totalCommits"===a?e.sort(window.comparator(e=>e.checkedFileTypeContribution)):e.sort(window.comparator(e=>e[a])),n&&e.reverse(),i.push(e)}),i.sort(window.comparator(Ai,l)),r&&i.reverse(),i}function _i(e,t){const i=[],{sortingOption:o,isSortingDsc:s}=t,r="groupTitle"===o;return e.forEach(e=>{e.forEach(e=>{i.push(e)})}),i.sort(window.comparator(e=>r?e.searchPath+e.name:"totalCommits"===o?e.checkedFileTypeContribution:e[o])),s&&i.reverse(),i}function Hi(e,t){const i={},o=[],{sortingWithinOption:s,sortingOption:r,isSortingDsc:n,isSortingWithinDsc:a}=t,l="title"===s?"searchPath":s,c="groupTitle"===r?"displayName":r;return e.forEach(e=>{e.forEach(e=>{Object.keys(i).includes(e.name)?i[e.name].push(e):i[e.name]=[e]})}),Object.keys(i).forEach(e=>{"totalCommits"===l?i[e].sort(window.comparator(e=>e.checkedFileTypeContribution)):i[e].sort(window.comparator(e=>e[l])),a&&i[e].reverse(),o.push(i[e])}),o.sort(window.comparator(Ai,c)),n&&o.reverse(),o}function Li(e,t){const{filterGroupSelection:i}=t;let o=[];return"groupByNone"===i?o[0]=_i(e,t):o="groupByAuthors"===i?Hi(e,t):Bi(e,t),o}var Ui=Li;const xi=/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))$/;var Ei={name:"v-summary",props:["repos","errorMessages"],data(){return{checkedFileTypes:[],fileTypes:[],filtered:[],filterSearch:"",filterGroupSelection:"groupByRepos",sortGroupSelection:"groupTitle",sortWithinGroupSelection:"title",sortingOption:"",isSortingDsc:"",sortingWithinOption:"",isSortingWithinDsc:"",filterTimeFrame:"commit",filterBreakdown:!1,tmpFilterSinceDate:"",tmpFilterUntilDate:"",hasModifiedSinceDate:window.app.isSinceDateProvided,hasModifiedUntilDate:window.app.isUntilDateProvided,filterSinceDate:"",filterUntilDate:"",filterHash:"",minDate:"",maxDate:"",fileTypeColors:{},isSafariBrowser:/.*Version.*Safari.*/.test(navigator.userAgent),randomGenerator:new Bt.a("Seeded Random Generator"),filterGroupSelectionWatcherFlag:!1}},computed:{checkAllFileTypes:{get(){return this.checkedFileTypes.length===this.fileTypes.length},set(e){this.checkedFileTypes=e?this.fileTypes.slice():[]}},avgContributionSize(){let e=0,t=0;return this.repos.forEach(i=>{i.users.forEach(i=>{void 0===i.checkedFileTypeContribution&&this.updateCheckedFileTypeContribution(i),i.checkedFileTypeContribution>0&&(t+=1,e+=i.checkedFileTypeContribution)})}),e/t},allGroupsMerged:{get(){return 0!==this.mergedGroups.length&&this.mergedGroups.length===this.filtered.length},set(e){if(e){const e=[];this.filtered.forEach(t=>{e.push(this.getGroupName(t))}),this.filtered=[],this.$store.commit("updateMergedGroup",e)}else this.$store.commit("updateMergedGroup",[])}},...Object(I["b"])(["mergedGroups"])},watch:{checkedFileTypes(){this.getFiltered()},filterBreakdown(){this.getFiltered()},sortGroupSelection(){this.getFiltered()},sortWithinGroupSelection(){this.getFiltered()},filterTimeFrame(){this.getFiltered()},filterGroupSelection(){if(!this.filterGroupSelectionWatcherFlag)return;const{allGroupsMerged:e}=this;this.$store.commit("incrementLoadingOverlayCount",1),setTimeout(()=>{this.getFilteredRepos(),this.updateMergedGroup(e),this.$store.commit("incrementLoadingOverlayCount",-1)})},tmpFilterSinceDate(){this.tmpFilterSinceDate&&this.tmpFilterSinceDate>=this.minDate?this.filterSinceDate=this.tmpFilterSinceDate:this.tmpFilterSinceDate||(this.filterSinceDate=this.minDate),this.getFiltered()},tmpFilterUntilDate(){this.tmpFilterUntilDate&&this.tmpFilterUntilDate<=this.maxDate?this.filterUntilDate=this.tmpFilterUntilDate:this.tmpFilterUntilDate||(this.filterUntilDate=this.maxDate),this.getFiltered()},"$store.state.summaryDates":function(){this.hasModifiedSinceDate=!0,this.hasModifiedUntilDate=!0,this.tmpFilterSinceDate=this.$store.state.summaryDates.since,this.tmpFilterUntilDate=this.$store.state.summaryDates.until,window.deactivateAllOverlays()},mergedGroups(){this.getFiltered()}},created(){this.processFileTypes(),this.renderFilterHash(),this.getFiltered()},mounted(){setTimeout(()=>{this.filterGroupSelectionWatcherFlag=!0},0)},methods:{dismissTab(e){e.target.parentNode.style.display="none"},getReportIssueGitHubLink(e){return`${window.BASE_URL}/reposense/RepoSense/issues/new?title=${this.getReportIssueTitle()}&body=${this.getReportIssueMessage(e)}`},getReportIssueEmailAddress(){return"seer@comp.nus.edu.sg"},getReportIssueEmailLink(e){return`mailto:${this.getReportIssueEmailAddress()}?subject=${this.getReportIssueTitle()}&body=${this.getReportIssueMessage(e)}`},getReportIssueTitle(){return encodeURI("Unexpected error with RepoSense version ")+window.app.repoSenseVersion},getReportIssueMessage(e){return encodeURI(e)},resetFilterSearch(){this.filterSearch="",this.getFiltered()},updateFilterSearch(e){this.filterSearch=e.target.value,this.getFiltered()},setSummaryHash(){const{addHash:e,encodeHash:t}=window;e("search",this.filterSearch),e("sort",this.sortGroupSelection),e("sortWithin",this.sortWithinGroupSelection),this.hasModifiedSinceDate&&e("since",this.filterSinceDate),this.hasModifiedUntilDate&&e("until",this.filterUntilDate),e("timeframe",this.filterTimeFrame);let i=this.mergedGroups.join(window.HASH_DELIMITER);if(0===i.length&&(i=""),e("mergegroup",i),e("groupSelect",this.filterGroupSelection),e("breakdown",this.filterBreakdown),this.filterBreakdown){const t=this.checkedFileTypes.length>0?this.checkedFileTypes.join(window.HASH_DELIMITER):"";e("checkedFileTypes",t)}else window.removeHash("checkedFileTypes");t()},renderFilterHash(){const e=e=>"true"===e,t=window.hashParams;if(t.search&&(this.filterSearch=t.search),t.sort&&(this.sortGroupSelection=t.sort),t.sortWithin&&(this.sortWithinGroupSelection=t.sortWithin),t.timeframe&&(this.filterTimeFrame=t.timeframe),t.mergegroup&&this.$store.commit("updateMergedGroup",t.mergegroup.split(window.HASH_DELIMITER)),t.since&&xi.test(t.since)&&(this.tmpFilterSinceDate=t.since),t.until&&xi.test(t.until)&&(this.tmpFilterUntilDate=t.until),t.groupSelect&&(this.filterGroupSelection=t.groupSelect),t.breakdown&&(this.filterBreakdown=e(t.breakdown)),t.checkedFileTypes){const e=t.checkedFileTypes.split(window.HASH_DELIMITER);this.checkedFileTypes=e.filter(e=>this.fileTypes.includes(e))}window.decodeHash()},getDates(){if(this.minDate&&this.maxDate)return;const e=window.app.sinceDate,t=window.app.untilDate;this.filterSinceDate||((!this.tmpFilterSinceDate||this.tmpFilterSinceDate<e)&&(this.tmpFilterSinceDate=e),this.filterSinceDate=e,this.minDate=e),this.filterUntilDate||((!this.tmpFilterUntilDate||this.tmpFilterUntilDate>t)&&(this.tmpFilterUntilDate=t),this.filterUntilDate=t,this.maxDate=t),this.$emit("get-dates",[this.minDate,this.maxDate])},getGroupName(e){return window.getGroupName(e,this.filterGroupSelection)},isMatchSearchedUser(e,t){return!e||e.toLowerCase().split(" ").filter(Boolean).some(e=>t.searchPath.includes(e))},getFiltered(){this.setSummaryHash(),this.getDates(),window.deactivateAllOverlays(),this.$store.commit("incrementLoadingOverlayCount",1),setTimeout(()=>{this.getFilteredRepos(),this.getMergedRepos(),this.$store.commit("incrementLoadingOverlayCount",-1)})},getFilteredRepos(){const e=[],t=this.hasMergedGroups()?JSON.parse(JSON.stringify(this.repos)):this.repos;t.forEach(t=>{const i=[];t.users.forEach(e=>{this.isMatchSearchedUser(this.filterSearch,e)&&(this.getUserCommits(e,this.filterSinceDate,this.filterUntilDate),"week"===this.filterTimeFrame&&this.splitCommitsWeek(e,this.filterSinceDate,this.filterUntilDate),this.updateCheckedFileTypeContribution(e),i.push(e))}),i.length&&e.push(i)}),this.filtered=e,this.getOptionWithOrder();const i={filterGroupSelection:this.filterGroupSelection,sortingOption:this.sortingOption,sortingWithinOption:this.sortingWithinOption,isSortingDsc:this.isSortingDsc,isSortingWithinDsc:this.isSortingWithinDsc};this.getOptionWithOrder(),this.filtered=Ui(e,i)},updateMergedGroup(e){if("groupByNone"!==this.filterGroupSelection&&e){const e=[];this.filtered.forEach(t=>{e.push(this.getGroupName(t))}),this.$store.commit("updateMergedGroup",e)}else this.$store.commit("updateMergedGroup",[])},getMergedRepos(){this.filtered.forEach((e,t)=>{this.mergedGroups.includes(this.getGroupName(e))&&this.mergeGroupByIndex(this.filtered,t)})},mergeGroupByIndex(e,t){const i={},o={},s=[],r=[],n={};let a=0,l=0;e[t].forEach(e=>{e.commits.forEach(t=>{this.mergeCommits(t,e,i,s)}),e.dailyCommits.forEach(t=>{this.mergeCommits(t,e,o,r)}),this.mergeFileTypeContribution(e,n),l+=e.checkedFileTypeContribution,a+=e.variance}),s.sort(window.comparator(e=>e.date)),e[t][0].commits=s,e[t][0].dailyCommits=r,e[t][0].fileTypeContribution=n,e[t][0].variance=a,e[t][0].checkedFileTypeContribution=l,e[t]=e[t].slice(0,1)},hasMergedGroups(){return this.mergedGroups.length>0},mergeCommits(e,t,i,o){const{commitResults:s,date:r,insertions:n,deletions:a}=e;if(s.forEach(e=>{e.repoId=t.repoId}),Object.prototype.hasOwnProperty.call(i,r)){const e=o[i[r]];s.forEach(t=>{e.commitResults.push(t)}),e.insertions+=n,e.deletions+=a}else i[r]=Object.keys(i).length,o.push(JSON.parse(JSON.stringify(e)))},mergeFileTypeContribution(e,t){Object.entries(e.fileTypeContribution).forEach(e=>{const i=e[0],o=e[1];Object.prototype.hasOwnProperty.call(t,i)||(t[i]=0),t[i]+=o})},processFileTypes(){const e=["#ffe119","#4363d8","#3cb44b","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],t={};let i=0;this.repos.forEach(o=>{o.users.forEach(o=>{Object.keys(o.fileTypeContribution).forEach(o=>{Object.prototype.hasOwnProperty.call(t,o)||(i<e.length?(t[o]=e[i],i+=1):t[o]=Mi(Object.values(t))),this.fileTypes.includes(o)||this.fileTypes.push(o)})}),this.fileTypeColors=t}),this.checkedFileTypes=this.fileTypes.slice(),this.$store.commit("updateFileTypeColors",this.fileTypeColors)},splitCommitsWeek(e,t,i){const{commits:o}=e,s=[],r=this.dateRounding(t,0),n=new Date(r).getTime(),a=new Date(t).getTime(),l=new Date(i).getTime();r<=i?(this.pushCommitsWeek(a,n-1,s,o),this.pushCommitsWeek(n,l,s,o)):this.pushCommitsWeek(a,l,s,o),e.commits=s},pushCommitsWeek(e,t,i,o){const s=Math.round(Math.abs((t-e)/window.DAY_IN_MS)),r=7*window.DAY_IN_MS;for(let n=0;n<s/7;n+=1){const s=e+n*r,a=s+r-window.DAY_IN_MS,l=a<=t?a:t,c={insertions:0,deletions:0,date:window.getDateStr(s),endDate:window.getDateStr(l),commitResults:[]};this.addLineContributionWeek(l,c,o),c.commitResults.length>0&&i.push(c)}},addLineContributionWeek(e,t,i){while(i.length>0&&new Date(i[0].date).getTime()<=e){const e=i.shift();t.insertions+=e.insertions,t.deletions+=e.deletions,e.commitResults.forEach(e=>t.commitResults.push(e))}},getUserCommits(e,t,i){e.commits=[];const o=e.dailyCommits[0],s=e.dailyCommits[e.dailyCommits.length-1];return o?(t&&"undefined"!==t||(t=o.date),i||(i=s.date),e.dailyCommits.forEach(o=>{const{date:s}=o;if(s>=t&&s<=i){const t=JSON.parse(JSON.stringify(o));this.filterCommitByCheckedFileTypes(t),t.commitResults.length>0&&e.commits.push(t)}}),null):null},filterCommitByCheckedFileTypes(e){const t=e.commitResults.map(e=>{const t=this.getFilteredFileTypes(e);return this.updateCommitResultWithFileTypes(e,t),e}).filter(e=>Object.values(e.fileTypesAndContributionMap).length>0);e.insertions=t.reduce((e,t)=>e+t.insertions,0),e.deletions=t.reduce((e,t)=>e+t.deletions,0),e.commitResults=t},getFilteredFileTypes(e){return Object.keys(e.fileTypesAndContributionMap).filter(this.isFileTypeChecked).reduce((t,i)=>(t[i]=e.fileTypesAndContributionMap[i],t),{})},isFileTypeChecked(e){return!this.filterBreakdown||this.checkedFileTypes.includes(e)},updateCommitResultWithFileTypes(e,t){e.insertions=Object.values(t).reduce((e,t)=>e+t.insertions,0),e.deletions=Object.values(t).reduce((e,t)=>e+t.deletions,0),e.fileTypesAndContributionMap=t},getOptionWithOrder(){[this.sortingOption,this.isSortingDsc]=this.sortGroupSelection.split(" "),[this.sortingWithinOption,this.isSortingWithinDsc]=this.sortWithinGroupSelection.split(" ")},resetDateRange(){this.hasModifiedSinceDate=!1,this.hasModifiedUntilDate=!1,this.tmpFilterSinceDate="",this.tmpFilterUntilDate="",window.removeHash("since"),window.removeHash("until")},updateTmpFilterSinceDate(e){const t=e.target.value;if(this.hasModifiedSinceDate=!0,!this.isSafariBrowser)return this.tmpFilterSinceDate=t,void(e.target.value=this.filterSinceDate);xi.test(t)&&t>=this.minDate?(this.tmpFilterSinceDate=t,e.currentTarget.style.removeProperty("border-bottom-color")):e.currentTarget.style.borderBottomColor="red"},updateTmpFilterUntilDate(e){const t=e.target.value;if(this.hasModifiedUntilDate=!0,!this.isSafariBrowser)return this.tmpFilterUntilDate=t,void(e.target.value=this.filterUntilDate);xi.test(t)&&t<=this.maxDate?(this.tmpFilterUntilDate=t,e.currentTarget.style.removeProperty("border-bottom-color")):e.currentTarget.style.borderBottomColor="red"},updateCheckedFileTypeContribution(e){let t=0;Object.keys(e.fileTypeContribution).forEach(i=>{this.filterBreakdown?this.checkedFileTypes.includes(i)&&(t+=e.fileTypeContribution[i]):t+=e.fileTypeContribution[i]}),e.checkedFileTypeContribution=t},restoreZoomFiltered(e){const{zSince:t,zUntil:i,zTimeFrame:o,zIsMerge:s,zFilterSearch:r}=e,n=[],a=JSON.parse(JSON.stringify(this.repos)),l=[];a.forEach(s=>{s.users.forEach(s=>{this.matchZoomUser(e,s)&&this.isMatchSearchedUser(r,s)&&(this.getUserCommits(s,t,i),"week"===o&&this.splitCommitsWeek(s,t,i),this.updateCheckedFileTypeContribution(s),l.push(s))})}),l.length&&n.push(l),s&&this.mergeGroupByIndex(n,0),e.zUser=n[0][0],e.zFileTypeColors=this.fileTypeColors,this.$store.commit("updateTabZoomInfo",e)},matchZoomUser(e,t){const{zIsMerge:i,zFilterGroup:o,zRepo:s,zAuthor:r}=e;return i?"groupByRepos"===o?t.repoName===s:t.name===r:t.repoName===s&&t.name===r},dateRounding(e,t){const i=new Date(e),o=i.getUTCDay();let s=i.getTime();return t?s-=(o+6)%7*window.DAY_IN_MS:s+=(8-o)%7*window.DAY_IN_MS,window.getDateStr(s)}},components:{vSummaryCharts:Ci}};i("2133");Ei.render=Gt;var Ii=Ei;const Ni={id:"authorship"},$i=Object(o["i"])("div",{class:"panel-title"},[Object(o["i"])("span",null,"Code Panel")],-1),Pi={class:"toolbar--multiline"},Wi={class:"panel-heading"},Vi={key:0,class:"author"},Zi=Object(o["i"])("span",null,"↳  ",-1),Ji={class:"period"},Ki=Object(o["i"])("span",null,"↳  ",-1),qi={class:"title"},Yi={key:0,class:"contribution"},Xi={class:"sorting mui-form--inline"},Qi={class:"mui-select sort-by"},eo=Object(o["i"])("option",{value:"lineOfCode"},"LoC",-1),to=Object(o["i"])("option",{value:"path"},"Path",-1),io=Object(o["i"])("option",{value:"fileName"},"File Name",-1),oo=Object(o["i"])("option",{value:"fileType"},"File Type",-1),so=Object(o["i"])("label",null,"sort by",-1),ro={class:"mui-select sort-order"},no=Object(o["i"])("option",{value:!0},"Descending",-1),ao=Object(o["i"])("option",{value:!1},"Ascending",-1),lo=Object(o["i"])("label",null,"order",-1),co={class:"searchbox"},po={class:"mui-form--inline"},uo={class:"fileTypes"},ho={key:0,class:"checkboxes mui-form--inline"},bo={style:{"background-color":"#000000",color:"#ffffff"}},mo=Object(o["i"])("span",null,"All ",-1),fo={key:0,class:"files"},Oo={key:0,class:"empty"},go={class:"title"},jo={class:"tooltip"},yo={class:"tooltip-text"},wo={class:"tooltip-text"},vo={class:"icons"},To={class:"tooltip"},Co=Object(o["i"])("span",{class:"tooltip-text"},"Click to view the history view of file",-1),ko={class:"tooltip"},So=Object(o["i"])("span",{class:"tooltip-text"},"Click to view the blame view of file",-1),Fo={key:0,class:"hljs file-content"};function zo(e,t,i,s,r,n){const a=Object(o["w"])("font-awesome-icon"),l=Object(o["w"])("v-segment");return Object(o["o"])(),Object(o["e"])("div",Ni,[$i,Object(o["i"])("div",Pi,[n.activeFilesCount<r.selectedFiles.length?(Object(o["o"])(),Object(o["e"])("a",{key:0,onClick:t[1]||(t[1]=e=>n.expandAll())},"show all file details")):Object(o["f"])("",!0),n.activeFilesCount>0?(Object(o["o"])(),Object(o["e"])("a",{key:1,onClick:t[2]||(t[2]=e=>n.collapseAll())},"hide all file details")):Object(o["f"])("",!0)]),Object(o["i"])("div",Wi,[Object(o["i"])("a",{class:"group-name",href:i.info.location,target:"_blank",title:"Click to open the repo"},Object(o["z"])(i.info.repo),9,["href"]),i.info.isMergeGroup?Object(o["f"])("",!0):(Object(o["o"])(),Object(o["e"])("div",Vi,[Zi,Object(o["i"])("span",null,Object(o["z"])(r.authorDisplayName)+" ("+Object(o["z"])(i.info.author)+")",1)])),Object(o["i"])("div",Ji,[Ki,Object(o["i"])("span",null,Object(o["z"])(i.info.minDate)+" to "+Object(o["z"])(i.info.maxDate)+"   ("+Object(o["z"])(r.selectedFiles.length)+" files changed)",1)])]),Object(o["i"])("div",qi,[r.isLoaded&&0!=r.files.length?(Object(o["o"])(),Object(o["e"])("div",Yi,[Object(o["i"])("div",Xi,[Object(o["i"])("div",Qi,[Object(o["H"])(Object(o["i"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.filesSortType=e)},[eo,to,io,oo],512),[[o["C"],r.filesSortType]]),so]),Object(o["i"])("div",ro,[Object(o["H"])(Object(o["i"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.toReverseSortFiles=e)},[no,ao],512),[[o["C"],r.toReverseSortFiles]]),lo])]),Object(o["i"])("div",co,[Object(o["H"])(Object(o["i"])("input",{class:"radio-button--search",type:"radio",value:"search","onUpdate:modelValue":t[5]||(t[5]=e=>r.filterType=e),onChange:t[6]||(t[6]=e=>{n.indicateSearchBar(),n.updateSearchBarValue()})},null,544),[[o["B"],r.filterType]]),Object(o["i"])("div",po,[Object(o["i"])("input",{id:"search",type:"search",placeholder:"Filter by glob",ref:"searchBar",value:r.searchBarValue,onFocus:t[7]||(t[7]=(...e)=>n.indicateSearchBar&&n.indicateSearchBar(...e)),onKeyup:t[8]||(t[8]=Object(o["I"])((...e)=>n.updateSearchBarValue&&n.updateSearchBarValue(...e),["enter"]))},null,40,["value"]),Object(o["i"])("button",{id:"submit-button",type:"button",onClick:t[9]||(t[9]=e=>{n.indicateSearchBar(),n.updateSearchBarValue()})},"Filter")])]),Object(o["i"])("div",uo,[Object(o["H"])(Object(o["i"])("input",{class:"radio-button--checkbox",type:"radio",value:"checkboxes","onUpdate:modelValue":t[10]||(t[10]=e=>r.filterType=e),onChange:t[11]||(t[11]=(...e)=>n.indicateCheckBoxes&&n.indicateCheckBoxes(...e))},null,544),[[o["B"],r.filterType]]),r.files.length>0?(Object(o["o"])(),Object(o["e"])("div",ho,[Object(o["i"])("label",bo,[Object(o["H"])(Object(o["i"])("input",{class:"mui-checkbox--fileType",id:"all",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>n.isSelectAllChecked=e)},null,512),[[o["A"],n.isSelectAllChecked]]),Object(o["i"])("span",{title:n.getTotalFileBlankLineInfo()},[mo,Object(o["i"])("span",null,Object(o["z"])(n.totalLineCount)+" ",1),Object(o["i"])("span",null,"("+Object(o["z"])(n.totalLineCount-n.totalBlankLineCount)+") ",1)],8,["title"])]),(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(Object.keys(n.fileTypeLinesObj),i=>(Object(o["o"])(),Object(o["e"])("label",{key:i,style:{"background-color":e.fileTypeColors[i],color:n.getFontColor(e.fileTypeColors[i])}},[Object(o["H"])(Object(o["i"])("input",{class:"mui-checkbox--fileType",type:"checkbox",id:i,value:i,onChange:t[13]||(t[13]=(...e)=>n.indicateCheckBoxes&&n.indicateCheckBoxes(...e)),"onUpdate:modelValue":t[14]||(t[14]=e=>r.selectedFileTypes=e)},null,40,["id","value"]),[[o["A"],r.selectedFileTypes]]),Object(o["i"])("span",{title:n.getFileTypeBlankLineInfo(i)},[Object(o["i"])("span",null,Object(o["z"])(i)+" "+Object(o["z"])(n.fileTypeLinesObj[i])+" ",1),Object(o["i"])("span",null,"("+Object(o["z"])(n.fileTypeLinesObj[i]-r.fileTypeBlankLinesObj[i])+") ",1)],8,["title"])],4))),128))])):Object(o["f"])("",!0)])])):Object(o["f"])("",!0)]),r.isLoaded?(Object(o["o"])(),Object(o["e"])("div",fo,[0===r.files.length?(Object(o["o"])(),Object(o["e"])("div",Oo,"nothing to see here :(")):Object(o["f"])("",!0),(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(r.selectedFiles,(t,i)=>(Object(o["o"])(),Object(o["e"])("div",{key:t.path,class:"file"},[Object(o["i"])("div",go,[Object(o["i"])("span",{class:"path",onClick:e=>n.toggleFileActiveProperty(t)},[Object(o["i"])("div",jo,[Object(o["H"])(Object(o["i"])(a,{icon:"caret-down","fixed-width":""},null,512),[[o["E"],t.active]]),Object(o["H"])(Object(o["i"])("span",yo,"Click to hide file details",512),[[o["E"],t.active]]),Object(o["H"])(Object(o["i"])(a,{icon:"caret-right","fixed-width":""},null,512),[[o["E"],!t.active]]),Object(o["H"])(Object(o["i"])("span",wo,"Click to show file details",512),[[o["E"],!t.active]])]),Object(o["i"])("span",null,Object(o["z"])(i+1)+".    "+Object(o["z"])(t.path)+"  ",1)],8,["onClick"]),Object(o["i"])("span",vo,[Object(o["i"])("a",{href:n.getFileLink(t,"commits"),target:"_blank"},[Object(o["i"])("div",To,[Object(o["i"])(a,{class:"button",icon:"history"}),Co])],8,["href"]),Object(o["i"])("a",{href:n.getFileLink(t,"blame"),target:"_blank"},[Object(o["i"])("div",ko,[Object(o["i"])(a,{class:"button",icon:"user-edit"}),So])],8,["href"])]),Object(o["i"])("span",{class:"fileTypeLabel",style:{"background-color":e.fileTypeColors[t.fileType],color:n.getFontColor(e.fileTypeColors[t.fileType])}},Object(o["z"])(t.fileType)+" "+Object(o["z"])(t.lineCount)+" ("+Object(o["z"])(t.lineCount-t.blankLineCount)+")",5)]),t.wasCodeLoaded?Object(o["H"])((Object(o["o"])(),Object(o["e"])("pre",Fo,[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(t.segments,e=>(Object(o["o"])(),Object(o["e"])(l,{key:e.lineNumbers[0],segment:e,path:t.path},null,8,["segment","path"]))),128))],512)),[[o["E"],t.active]]):Object(o["f"])("",!0)]))),128))])):Object(o["f"])("",!0)])}const Do=Object(o["K"])("data-v-6fa16da6");Object(o["q"])("data-v-6fa16da6");const Mo={key:1},Ro={class:"line-number"},Go={class:"line-content"};Object(o["p"])();const Ao=Do((e,t,i,s,r,n)=>{const a=Object(o["w"])("font-awesome-icon"),l=Object(o["x"])("hljs");return Object(o["o"])(),Object(o["e"])("div",{class:["segment",{untouched:!i.segment.authored,active:r.isOpen}]},[r.hasCloser?(Object(o["o"])(),Object(o["e"])("div",{key:0,class:"closer",onClick:t[1]||(t[1]=(...e)=>n.toggleCode&&n.toggleCode(...e)),ref:"topButton"},[Object(o["H"])(Object(o["i"])(a,{class:"icon",icon:"plus-circle",title:"Click to open code"},null,512),[[o["E"],!r.isOpen]]),Object(o["H"])(Object(o["i"])(a,{class:"icon",icon:"chevron-circle-down",title:"Click to hide code"},null,512),[[o["E"],r.isOpen]])],512)):Object(o["f"])("",!0),r.isLoaded?Object(o["H"])((Object(o["o"])(),Object(o["e"])("div",Mo,[(Object(o["o"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(i.segment.lines,(e,t)=>(Object(o["o"])(),Object(o["e"])("div",{class:"code",key:t},[Object(o["i"])("div",Ro,Object(o["z"])(i.segment.lineNumbers[t]+"\n"),1),Object(o["i"])("div",Go,Object(o["z"])(e+"\n"),1)]))),128))],512)),[[o["E"],r.isOpen],[l,i.path]]):Object(o["f"])("",!0),r.hasCloser?(Object(o["o"])(),Object(o["e"])("div",{key:2,class:"closer bottom",onClick:t[2]||(t[2]=(...e)=>n.toggleCode&&n.toggleCode(...e))},[Object(o["H"])(Object(o["i"])(a,{class:"icon",icon:"chevron-circle-up",title:"Click to hide code"},null,512),[[o["E"],r.isOpen]])])):Object(o["f"])("",!0)],2)});var Bo={name:"v-segment",props:["segment","path"],data(){return{isLoaded:this.segment.authored||this.segment.lines.length<5,isOpen:this.segment.authored||this.segment.lines.length<5,hasCloser:!this.segment.authored&&this.segment.lines.length>4}},methods:{toggleCode(){this.isLoaded=!0,this.isOpen=!this.isOpen}}};i("c1c2");Bo.render=Ao,Bo.__scopeId="data-v-6fa16da6";var _o=Bo;const Ho={lineOfCode:e=>e.lineCount,path:e=>e.path,fileName:e=>e.path.split(/[/]+/).pop(),fileType:e=>e.fileType},Lo=[],Uo=i("d8b2");var xo={name:"v-authorship",props:["info"],data(){return{authorDisplayName:"",isLoaded:!1,files:[],selectedFiles:[],filterType:"checkboxes",selectedFileTypes:[],fileTypes:[],filesLinesObj:{},fileTypeBlankLinesObj:{},filesSortType:"lineOfCode",toReverseSortFiles:!0,searchBarValue:""}},watch:{filesSortType(){window.addHash("authorshipSortBy",this.filesSortType),window.encodeHash(),this.updateSelectedFiles()},searchBarValue(){this.updateSelectedFiles()},selectedFileTypes(){this.updateSelectedFiles()},toReverseSortFiles(){window.addHash("reverseAuthorshipOrder",this.toReverseSortFiles),window.encodeHash(),this.updateSelectedFiles()},isLoaded(){this.isLoaded&&(this.retrieveHashes(),this.setInfoHash())}},methods:{retrieveHashes(){window.decodeHash();const e=window.hashParams;switch(e.authorshipSortBy){case"path":case"fileName":case"fileType":this.filesSortType=e.authorshipSortBy;break;default:}this.toReverseSortFiles="false"!==e.reverseAuthorshipOrder,this.selectedFileTypes=this.info.checkedFileTypes?this.info.checkedFileTypes.filter(e=>this.fileTypes.includes(e)):[],e.authorshipFileTypes&&(this.selectedFileTypes=e.authorshipFileTypes.split(window.HASH_DELIMITER).filter(e=>this.fileTypes.includes(e))),"authorshipFilesGlob"in e&&(this.indicateSearchBar(),this.searchBarValue=e.authorshipFilesGlob)},setInfoHash(){const{addHash:e}=window;e("tabAuthor",this.info.author),e("tabRepo",this.info.repo),e("authorshipIsMergeGroup",this.info.isMergeGroup),this.updateFileTypeHash()},removeAuthorshipHashes(){window.removeHash("authorshipFileTypes"),window.removeHash("authorshipFilesGlob"),window.removeHash("authorshipSortBy"),window.removeHash("reverseAuthorshipOrder"),window.removeHash("tabAuthor"),window.removeHash("tabRepo"),window.removeHash("authorshipIsMergeGroup"),window.encodeHash()},initiate(){const e=window.REPOS[this.info.repo];if(this.getRepoProps(e),e&&this.info.author){if(2===Lo.length){const e=Lo.shift();e!==this.info.repo&&delete window.REPOS[e].files}Lo.push(this.info.repo),e.files?this.processFiles(e.files):window.api.loadAuthorship(this.info.repo).then(e=>this.processFiles(e))}else window.app.isTabActive=!1},getFontColor(e){return window.getFontColor(e)},getRepoProps(e){if(e)if(this.info.isMergeGroup)e.users.forEach(e=>{this.updateTotalFileTypeContribution(e.fileTypeContribution)});else{const t=e.users.find(e=>e.name===this.info.author);t&&(this.authorDisplayName=t.displayName,this.filesLinesObj=t.fileTypeContribution)}},updateTotalFileTypeContribution(e){Object.entries(e).forEach(([e,t])=>{this.filesLinesObj[e]?this.filesLinesObj[e]+=t:this.filesLinesObj[e]=t})},expandAll(){this.selectedFiles.forEach(e=>{e.active=!0,e.wasCodeLoaded=!0})},collapseAll(){this.selectedFiles.forEach(e=>{e.active=!1})},toggleFileActiveProperty(e){e.active=!e.active,e.wasCodeLoaded=e.wasCodeLoaded||e.active},isUnknownAuthor(e){return"-"===e},hasCommits(e){const{isMergeGroup:t,author:i}=e,o=window.REPOS[e.repo];return!!o&&(t?Object.entries(o.commits.authorFinalContributionMap).some(([e,t])=>!this.isUnknownAuthor(e)&&t>0):o.commits.authorFinalContributionMap[i]>0)},splitSegments(e){let t,i=-1;const o=[];let s=0;return e.forEach((e,r)=>{const n=this.info.isMergeGroup?!this.isUnknownAuthor(e.author.gitId):e.author.gitId===this.info.author,a=e.author&&n;a===t&&-1!==i||(o.push({authored:a,lines:[],lineNumbers:[]}),i+=1,t=a);const l=e.content||" ";o[i].lines.push(l),o[i].lineNumbers.push(r+1),""===e.content&&a&&(s+=1)}),{segments:o,blankLineCount:s}},processFiles(e){const t=2e3,i=[],o={};e.forEach(e=>{const s=e.authorContributionMap,r=this.info.isMergeGroup?this.getContributionFromAllAuthors(s):s[this.info.author];if(r){const s={};s.path=e.path,s.lineCount=r,s.active=r<=t,s.wasCodeLoaded=r<=t,s.fileType=e.fileType;const n=this.splitSegments(e.lines);s.segments=n.segments,s.blankLineCount=n.blankLineCount,this.addBlankLineCount(e.fileType,n.blankLineCount,o),i.push(s)}}),i.sort((e,t)=>t.lineCount-e.lineCount),Object.keys(this.filesLinesObj).forEach(e=>{0!==this.filesLinesObj[e]&&this.fileTypes.push(e)}),this.fileTypeBlankLinesObj=o,this.files=i,this.isLoaded=!0,this.updateSelectedFiles()},getContributionFromAllAuthors(e){return Object.entries(e).reduce((e,[t,i])=>this.isUnknownAuthor(t)?e:e+i,0)},addBlankLineCount(e,t,i){i[e]||(i[e]=0),i[e]+=t},updateSearchBarValue(){this.searchBarValue=this.$refs.searchBar.value,window.addHash("authorshipFilesGlob",this.searchBarValue),window.removeHash("authorshipFileTypes"),window.encodeHash()},updateFileTypeHash(){const e=this.selectedFileTypes.length>0?this.selectedFileTypes.reduce((e,t)=>`${e}~${t}`):"";window.addHash("authorshipFileTypes",e),window.removeHash("authorshipFilesGlob"),window.encodeHash()},updateSelectedFiles(){this.$store.commit("incrementLoadingOverlayCount",1),setTimeout(()=>{this.selectedFiles=this.files.filter(e=>this.selectedFileTypes.includes(e.fileType)&&Uo(e.path,this.searchBarValue||"*",{matchBase:!0,dot:!0})).sort(this.sortingFunction),this.$store.commit("incrementLoadingOverlayCount",-1)})},indicateSearchBar(){this.selectedFileTypes=this.fileTypes.slice(),this.filterType="search"},indicateCheckBoxes(){this.searchBarValue="",this.filterType="checkboxes",this.updateFileTypeHash()},getFileLink(e,t){const i=window.REPOS[this.info.repo];return`${window.BASE_URL}/${i.location.organization}/${i.location.repoName}/${t}/${i.branch}/${e.path}`},getFileTypeBlankLineInfo(e){return`${e}: Blank: ${this.fileTypeBlankLinesObj[e]}, Non-Blank: ${this.filesLinesObj[e]-this.fileTypeBlankLinesObj[e]}`},getTotalFileBlankLineInfo(){return`Total: Blank: ${this.totalBlankLineCount}, Non-Blank: ${this.totalLineCount-this.totalBlankLineCount}`}},computed:{sortingFunction(){return(e,t)=>(this.toReverseSortFiles?-1:1)*window.comparator(Ho[this.filesSortType])(e,t)},isSelectAllChecked:{get(){return this.selectedFileTypes.length===this.fileTypes.length},set(e){this.selectedFileTypes=e?this.fileTypes.slice():[],this.indicateCheckBoxes()}},activeFilesCount(){return this.selectedFiles.filter(e=>e.active).length},totalLineCount(){return Object.values(this.fileTypeLinesObj).reduce((e,t)=>e+t,0)},totalBlankLineCount(){return Object.values(this.fileTypeBlankLinesObj).reduce((e,t)=>e+t,0)},fileTypeLinesObj(){const e={};return Object.entries(this.filesLinesObj).filter(([,e])=>e>0).forEach(([t,i])=>{e[t]=i}),e},...Object(I["b"])(["fileTypeColors"])},created(){this.initiate()},beforeUnmount(){this.removeAuthorshipHashes()},components:{vSegment:_o}};i("f5e3");xo.render=zo;var Eo=xo;const Io="Loading resources...";var No={el:"#app",data(){return{repos:{},users:[],userUpdated:!1,isLoadingOverlayEnabled:!1,loadingOverlayOpacity:1,isCollapsed:!1,isTabActive:!0,tabType:"empty",tabInfo:{},creationDate:"",errorMessages:window.appErrorMessages,reportGenerationTime:window.appReportGenerationTime}},watch:{"$store.state.tabZoomInfo":function(){this.tabInfo.tabZoom=Object.assign({},this.$store.state.tabZoomInfo),this.activateTab("zoom")},"$store.state.tabAuthorshipInfo":function(){this.tabInfo.tabAuthorship=Object.assign({},this.$store.state.tabAuthorshipInfo),this.activateTab("authorship")},"$store.state.loadingOverlayCount":function(){this.isLoadingOverlayEnabled=this.$store.state.loadingOverlayCount>0}},methods:{updateReportZip(e){this.users=[],window.JSZip.loadAsync(e.target.files[0]).then(e=>{window.REPORT_ZIP=e},()=>{window.alert("Either the .zip file is corrupted, or you uploaded a .zip file that is not generated by RepoSense.")}).then(()=>this.updateReportView().then(()=>this.renderTabHash()))},updateReportDir(){window.REPORT_ZIP=null,this.users=[],window.decodeHash(),this.updateReportView().then(()=>this.renderTabHash())},async updateReportView(){await window.api.loadSummary().then(e=>(this.repos=window.REPOS,this.userUpdated=!1,this.$store.commit("incrementLoadingOverlayCount",1),this.$store.commit("updateLoadingOverlayMessage",Io),Promise.all(e.map(e=>window.api.loadCommits(e))))).then(()=>{this.userUpdated=!0,this.$store.commit("incrementLoadingOverlayCount",-1),this.loadingOverlayOpacity=.5,this.getUsers()}).catch(e=>{this.userUpdated=!1,this.$store.commit("incrementLoadingOverlayCount",-1),window.alert(e)})},getUsers(){const e=[];Object.keys(this.repos).forEach(t=>{this.repos[t].users&&e.push(this.repos[t])}),this.users=e},activateTab(e){this.isTabActive=!1,this.$refs.tabWrapper&&(this.$refs.tabWrapper.scrollTop=0),this.isTabActive=!0,this.isCollapsed=!1,this.tabType=e,window.addHash("tabOpen",this.isTabActive),window.addHash("tabType",this.tabType),window.encodeHash()},deactivateTab(){this.isTabActive=!1,window.addHash("tabOpen",this.isTabActive),window.removeHash("tabType"),window.encodeHash()},renderAuthorShipTabHash(e,t){const i=window.hashParams,o={author:i.tabAuthor,repo:i.tabRepo,isMergeGroup:"true"===i.authorshipIsMergeGroup,minDate:e,maxDate:t},s=Object.values(o).filter(e=>null!==e).length;Object.keys(o).length===s?this.$store.commit("updateTabAuthorshipInfo",o):("false"===i.tabOpen||s>2)&&(window.app.isTabActive=!1)},renderZoomTabHash(){const e=window.hashParams,t={zAuthor:e.zA,zRepo:e.zR,zAvgCommitSize:e.zACS,zSince:e.zS,zUntil:e.zU,zFilterGroup:e.zFGS,zFilterSearch:e.zFS,zTimeFrame:e.zFTF,zIsMerge:"true"===e.zMG,zFromRamp:"true"===e.zFR},i=Object.values(t).filter(e=>null!==e).length;Object.keys(t).length===i?this.$refs.summary.restoreZoomFiltered(t):("false"===e.tabOpen||i>2)&&(window.app.isTabActive=!1)},renderTabHash(){const e=window.hashParams;if(e.tabOpen&&(this.isTabActive="true"===e.tabOpen,this.isTabActive))if("authorship"===e.tabType){let{since:t,until:i}=e;t=t||window.app.sinceDate,i=i||window.app.untilDate,this.renderAuthorShipTabHash(t,i)}else this.renderZoomTabHash()},generateKey(e,t){const i=t.map(t=>e[t]);return JSON.stringify(i)},getRepoSenseHomeLink(){const e=window.app.repoSenseVersion;return e?""+window.HOME_PAGE_URL:window.HOME_PAGE_URL+"/RepoSense/"},getSpecificCommitLink(){const e=window.app.repoSenseVersion;return e?e.startsWith("v")?`${window.BASE_URL}/reposense/RepoSense/releases/tag/${e}`:`${window.BASE_URL}/reposense/RepoSense/commit/${e}`:window.BASE_URL+"/reposense/RepoSense"},getUserGuideLink(){const e=window.app.repoSenseVersion;return e?window.HOME_PAGE_URL+"/ug/index.html":window.HOME_PAGE_URL+"/RepoSense/ug/index.html"},getUsingReportsUserGuideLink(){const e=window.app.repoSenseVersion;return e?window.HOME_PAGE_URL+"/ug/usingReports.html":window.HOME_PAGE_URL+"/RepoSense/ug/usingReports.html"},receiveDates(e){const[t,i]=e;"authorship"===this.tabType&&this.renderAuthorShipTabHash(t,i)}},computed:{...Object(I["b"])(["loadingOverlayMessage"])},components:{LoadingOverlay:E["a"],vResizer:q,vZoom:Ie,vSummary:Ii,vAuthorship:Eo},created(){this.updateReportDir()}};i("2225");No.render=x;var $o=No;const Po=Object(I["a"])({state:{tabAuthorshipInfo:{},tabZoomInfo:{},summaryDates:{},mergedGroups:[],fileTypeColors:{},loadingOverlayCount:0,loadingOverlayMessage:""},mutations:{updateTabZoomInfo(e,t){e.tabZoomInfo=t},updateTabAuthorshipInfo(e,t){e.tabAuthorshipInfo=t},updateSummaryDates(e,t){e.summaryDates=t},updateFileTypeColors(e,t){e.fileTypeColors=t},updateMergedGroup(e,t){e.mergedGroups=t},incrementLoadingOverlayCount(e,t){e.loadingOverlayCount+=t,0===e.loadingOverlayCount&&(e.loadingOverlayMessage="Loading. Please wait...")},updateLoadingOverlayMessage(e,t){e.loadingOverlayMessage=t}}});var Wo=Po;window.$=e=>document.getElementById(e),window.enquery=(e,t)=>`${e}=${encodeURIComponent(t)}`,window.BASE_URL="https://github.com",window.HOME_PAGE_URL="https://reposense.org",window.DAY_IN_MS=864e5,window.HASH_DELIMITER="~",window.REPOS={},window.hashParams={},window.isMacintosh=navigator.platform.includes("Mac"),window.appErrorMessages={},window.appReportGenerationTime="";const Vo="?",Zo=".",Jo=null;window.deactivateAllOverlays=function(){document.querySelectorAll(".summary-chart__ramp .overlay").forEach(e=>{e.className="overlay"})},window.getDateStr=function(e){return new Date(e).toISOString().split("T")[0]},window.getHexToRGB=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t.slice(1).map(e=>parseInt(e,16))},window.getFontColor=function(e){const t=window.getHexToRGB(e),i=t[0],o=t[1],s=t[2],r=.2126*i+.7152*o+.0722*s;return r<120?"#ffffff":"#000000"},window.addHash=function(e,t){window.hashParams[e]=t},window.removeHash=function(e){delete window.hashParams[e]},window.encodeHash=function(){const{hashParams:e}=window,t=Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&"),i=`${window.location.protocol}//${window.location.host}${window.location.pathname}${Vo}${t}`;window.history.replaceState(null,"",i)},window.decodeHash=function(){const e={},t=window.location.href.indexOf(Vo),i=-1===t?"":window.location.href.slice(t+1);i.split("&").forEach(t=>{const[i,o]=t.split("=");if(i)try{e[i]=decodeURIComponent(o)}catch(s){this.userUpdated=!1,this.isLoading=!1}}),window.hashParams=e},window.comparator=(e,t="")=>function(i,o){let s,r;return t?(s=e(i,t).toLowerCase?e(i,t).toLowerCase():e(i,t),r=e(o,t).toLowerCase?e(o,t).toLowerCase():e(o,t)):(s=e(i).toLowerCase?e(i).toLowerCase():e(i),r=e(o).toLowerCase?e(o).toLowerCase():e(o)),s===r?0:s<r?-1:1},window.toggleNext=function(e){const t="active",i=e.parentNode,o=i.className.split(" "),s=o.indexOf(t);-1===s?o.push(t):o.splice(s,1),i.className=o.join(" ")},window.getBaseLink=function(e){return`${window.BASE_URL}/${window.REPOS[e].location.organization}/${window.REPOS[e].location.repoName}`},window.getGroupName=function(e,t){switch(t){case"groupByRepos":return e[0].repoName;case"groupByAuthors":return e[0].name;default:return""}},window.api={loadJSON(e){if(Jo){const t=Jo.file(e.slice(2));return t?t.async("text").then(e=>JSON.parse(e)):Promise.reject(new Error("Zip file is invalid."))}return new Promise((t,i)=>{const o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){200===o.status?t(JSON.parse(o.responseText)):i(new Error("Unable to get file."))},o.send(null)})},loadSummary(){return window.REPOS={},this.loadJSON(Zo+"/summary.json").then(e=>{window.app.creationDate=e.reportGeneratedTime,window.app.sinceDate=e.sinceDate,window.app.untilDate=e.untilDate,window.app.repoSenseVersion=e.repoSenseVersion,window.app.isSinceDateProvided=e.isSinceDateProvided,window.app.isUntilDateProvided=e.isUntilDateProvided,window.appReportGenerationTime=e.reportGenerationTime,Object.entries(e.errorList).forEach(([e,t])=>{window.appErrorMessages[e]=t});const t=[];return e.repos.forEach(e=>{const i=""+e.displayName;window.REPOS[i]=e,t.push(i)}),t})},loadCommits(e){const t=window.REPOS[e].outputFolderName;return this.loadJSON(`${Zo}/${t}/commits.json`).then(t=>{const i=[],o=window.REPOS[e];return Object.keys(t.authorDisplayNameMap).forEach(s=>{if(s){const r={name:s,repoId:e,variance:t.authorContributionVariance[s],displayName:t.authorDisplayNameMap[s],dailyCommits:t.authorDailyContributionsMap[s],fileTypeContribution:t.authorFileTypeContributionMap[s]};this.setContributionOfCommitResults(r.dailyCommits);const n=[o.displayName,r.displayName,s];r.searchPath=n.join("_").toLowerCase(),r.repoName=""+o.displayName,r.location=""+o.location.location,i.push(r)}}),o.commits=t,o.users=i,i})},loadAuthorship(e){const t=window.REPOS[e].outputFolderName;return this.loadJSON(`${Zo}/${t}/authorship.json`).then(t=>(window.REPOS[e].files=t,t))},setContributionOfCommitResults(e){e.forEach(e=>{e.commitResults.forEach(e=>{e.insertions=Object.values(e.fileTypesAndContributionMap).reduce((e,t)=>e+t.insertions,0),e.deletions=Object.values(e.fileTypesAndContributionMap).reduce((e,t)=>e+t.deletions,0)})})}};function Ko(e){return e>=48&&e<=57||e>=96&&e<=105}function qo(e){return e>=37&&e<=40||13===e}function Yo(e){return 8===e||46===e}function Xo(e){const t=e.keyCode;Ko(t)||Yo(t)||qo(t)||e.preventDefault()}function Qo(e){const t=e.keyCode,i=e.target.value;if(Yo(t)){const t=e.target.selectionStart;"-"===i[t-1]&&(e.target.value=i.slice(0,t-1))}}window.formatInputDateOnKeyDown=function(e){Xo(e),Qo(e)},window.appendDashInputDate=function(e){const t=e.target.value;(null!==t.match(/^\d{4}$/)||null!==t.match(/^\d{4}-\d{2}$/))&&(e.target.value+="-")};var es=i("c074"),ts=i("f2d1");s["d"].add(es["j"],es["n"],es["h"],es["l"]),s["d"].add(es["b"]),s["d"].add(es["j"]),s["d"].add(es["f"],es["e"],ts["a"],es["p"],es["h"],es["l"],es["g"]),s["d"].add(es["o"],es["i"]),s["d"].add(es["a"],es["b"],es["k"],es["q"]),s["d"].add(es["m"],es["d"],es["c"]),s["b"].watch();const is=Object(o["d"])($o);is.component("font-awesome-icon",r["a"]),is.use(Wo),is.mount("#app"),is.directive("hljs",{mounted(e,t){const i=e;i.className=t.value.split(".").pop(),a.a.highlightBlock(i)}})},"72c5":function(e,t,i){},"7f14":function(e,t,i){},c1c2:function(e,t,i){"use strict";i("7f14")},f5e3:function(e,t,i){"use strict";i("72c5")}});
//# sourceMappingURL=app.b7c83e2c.js.map